<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- 기본 메타데이터 --><meta name="description" content="Jiny linux"><meta name="author" content="HojinLee"><!-- 제목 설정 --><title>Chapter 21. 자바 21에서 강화된 언어 및 라이브러리</title>
  <meta name="title" content="Chapter 21. 자바 21에서 강화된 언어 및 라이브러리" /><!-- 키워드 설정 --><!-- Open Graph 메타데이터 --><meta property="og:title" content="Chapter 21. 자바 21에서 강화된 언어 및 라이브러리"><meta property="og:description" content="Jiny linux"><meta property="og:type" content="website"><meta property="og:locale" content="ko">
  <meta property="og:site_name" content="linux">
  <meta property="og:url" content="https://java.jiny.dev/part05/21/">

  <!-- Twitter 카드 메타데이터 --><meta name="twitter:card" content="summary"><meta property="twitter:title" content="Chapter 21. 자바 21에서 강화된 언어 및 라이브러리"><!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Chapter 21. 자바 21에서 강화된 언어 및 라이브러리" />
<meta name="author" content="Hojin" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="자바 언어를 통한 객체지향 프로그래밍의 이해와 실습" />
<meta property="og:description" content="자바 언어를 통한 객체지향 프로그래밍의 이해와 실습" />
<link rel="canonical" href="https://java.jiny.dev/part05/21/" />
<meta property="og:url" content="https://java.jiny.dev/part05/21/" />
<meta property="og:site_name" content="객체지향 자바 프로그래밍 (Object-Oriented Java Programming)" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Chapter 21. 자바 21에서 강화된 언어 및 라이브러리" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Hojin"},"description":"자바 언어를 통한 객체지향 프로그래밍의 이해와 실습","headline":"Chapter 21. 자바 21에서 강화된 언어 및 라이브러리","url":"https://java.jiny.dev/part05/21/"}</script>
<!-- End Jekyll SEO tag -->


  <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
  <link href="/assets/css/docs.css" rel="stylesheet" />
  <link href="/assets/css/highlight.css" rel="stylesheet" />

  <style>
    blockquote {
      border-left: solid 5px #dee2e6;
      padding: 5px 10px;
      background-color: #f8f9fa;
    }
  </style>

  <style>
    h1 a {
      text-decoration: none;
    }

    h2 a {
      text-decoration: none;
    }

    h3 a {
      text-decoration: none;
    }

    h4 a {
      text-decoration: none;
    }

    h5 a {
      text-decoration: none;
    }

    h6 a {
      text-decoration: none;
    }

    img {
      max-width: 100%;
      height: auto;
      vertical-align: top
    }

    strong a {
      text-decoration: none;
      color: inherit;
    }

    /* 스크롤바 커스텀 */
    /* 임의의 영역 생성 */
    .scrollBar {}

    /* 아래의 모든 코드는 영역::코드로 사용 */
    .scrollBar::-webkit-scrollbar {
      width: 7px;
      /* 스크롤바의 너비 */
    }

    .scrollBar::-webkit-scrollbar-thumb {
      height: 30%;
      /* 스크롤바의 길이 */
      background: #cccccc;
      /* 스크롤바의 색상 */

      border-radius: 5px;
    }

    .scrollBar::-webkit-scrollbar-track {
      background: rgba(33, 122, 244, .1);
      /*스크롤바 뒷 배경 색상*/
    }
  </style>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-R4VBPCT3CR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-R4VBPCT3CR');
  </script>


</head>

<body>
  <header class="navbar navbar-expand-lg bd-navbar sticky-top">
    <nav class="container bd-gutter flex-wrap flex-lg-nowrap position-relative" aria-label="Main navigation">

      <!-- Mobile: Left Toggle (Browse) -->
      <div class="bd-navbar-toggle d-lg-none">
        <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#bdSidebar"
          aria-controls="bdSidebar" aria-label="Toggle docs navigation">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="bi" fill="currentColor"
            viewBox="0 0 16 16">
            <path fill-rule="evenodd"
              d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z">
            </path>
          </svg>
          <span class="d-none fs-6 pe-1">Browse</span>
        </button>
      </div>

      <!-- Brand: Desktop (Static), Mobile (Absolute Center) -->
      <a class="navbar-brand p-0 me-0 me-lg-2 ms-lg-0 d-none d-lg-inline-block" href="/" aria-label="jinydev">
        <svg width="32" height="26" viewBox="0 0 32 29" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M24.2746 5.33377C25.8486 7.33981 25.1183 11.1792 24.3961 13.0177C24.4028 13.0199 24.4094 13.0221 24.4161 13.0243L24.4013 13.0248L22.649 12.9082C22.649 12.9053 22.6488 12.9013 22.649 12.8993C22.9902 8.93373 22.5975 7.34575 22.2147 7.07677C17.6316 10.3896 13.5379 9.33658 12.2725 9.01111C11.928 8.9225 11.7932 8.88781 11.9152 9.00988C12.2872 9.38185 13.1336 9.82821 13.7371 10.1465H13.7372L13.7376 10.1467C13.8743 10.2188 13.9985 10.2843 14.1019 10.3409C9.12673 10.3984 7.12659 8.00279 6.53855 7.29846C6.47859 7.22664 6.4333 7.1724 6.40105 7.14015C6.11408 6.85318 4.49961 5.87252 3.99256 7.74227C3.50142 9.55335 3.81246 11.6775 3.97665 12.7988C3.99089 12.896 3.99257 12.8981 3.99257 12.9298L2.37635 13.0248L2.37213 13.0247C0.223493 8.05534 1.83854 5.26971 3.29536 4.2246C3.29536 1.78444 6.27428 -0.592359 10.0455 0.263262C14.8768 1.64043 16.3468 1.18409 18.0759 0.647278C18.774 0.430562 19.5143 0.200726 20.5351 0.073124C25.2219 -0.512739 26.7993 2.56612 27 4.16122C26.2141 3.70487 24.8556 4.73165 24.2746 5.33377ZM12.3374 1.5872C11.1225 1.16466 7.99257 0.717209 6.3478 2.41116C5.98397 2.78587 5.55554 3.48864 5.55554 3.48864C5.55554 3.48864 4.82665 4.81961 4.25622 4.24919C3.68579 3.67878 5.0168 1.96749 6.06259 1.46044C7.10838 0.953388 9.70703 0.0660505 12.3374 1.5872Z"
            fill="currentColor" />
          <path
            d="M10.078 13.5002H3.10601C2.2309 13.5002 1.52148 14.2097 1.52148 15.0848V18.3172C1.52148 19.1923 2.2309 19.9018 3.10601 19.9018H10.078C10.9531 19.9018 11.6625 19.1923 11.6625 18.3172V15.0848C11.6625 14.2097 10.9531 13.5002 10.078 13.5002Z"
            stroke="currentColor" stroke-width="1.26763" />
          <path
            d="M0.823513 14.6094H0.379847C0.187322 14.6094 0.03125 14.7654 0.03125 14.958V15.9721C0.03125 16.1646 0.187322 16.3207 0.379847 16.3207H0.823513C1.01604 16.3207 1.17211 16.1646 1.17211 15.9721V14.958C1.17211 14.7654 1.01604 14.6094 0.823513 14.6094Z"
            fill="currentColor" stroke="currentColor" stroke-width="0.0633813" />
          <path
            d="M16.7326 13.5002H23.7045C24.5796 13.5002 25.2891 14.2097 25.2891 15.0848V18.3172C25.2891 19.1923 24.5796 19.9018 23.7045 19.9018H16.7326C15.8575 19.9018 15.1481 19.1923 15.1481 18.3172V15.0848C15.1481 14.2097 15.8575 13.5002 16.7326 13.5002Z"
            stroke="currentColor" stroke-width="1.26763" />
          <path
            d="M25.9861 14.6094H26.4297C26.6222 14.6094 26.7783 14.7654 26.7783 14.958V15.9721C26.7783 16.1646 26.6222 16.3207 26.4297 16.3207H25.9861C25.7935 16.3207 25.6375 16.1646 25.6375 15.9721V14.958C25.6375 14.7654 25.7935 14.6094 25.9861 14.6094Z"
            fill="currentColor" stroke="currentColor" stroke-width="0.0633813" />
          <path
            d="M12.2954 15.5601H14.5137C14.7062 15.5601 14.8623 15.7161 14.8623 15.9087V16.9228C14.8623 17.1153 14.7062 17.2713 14.5137 17.2713H12.2954C12.1028 17.2713 11.9468 17.1153 11.9468 16.9228V15.9087C11.9468 15.7161 12.1028 15.5601 12.2954 15.5601Z"
            fill="currentColor" stroke="currentColor" stroke-width="0.0633813" />
          <path
            d="M9.93343 16.3937C9.93343 16.7087 9.76317 16.9641 9.55314 16.9641C9.34311 16.9641 9.17285 16.7087 9.17285 16.3937C9.17285 16.0786 9.34311 15.8232 9.55314 15.8232C9.76317 15.8232 9.93343 16.0786 9.93343 16.3937Z"
            fill="currentColor" />
          <path
            d="M16.9688 16.3937C16.9688 16.7087 17.139 16.9641 17.3491 16.9641C17.5591 16.9641 17.7293 16.7087 17.7293 16.3937C17.7293 16.0786 17.5591 15.8232 17.3491 15.8232C17.139 15.8232 16.9688 16.0786 16.9688 16.3937Z"
            fill="currentColor" />
          <path
            d="M14.2758 20.1016C13.642 20.6086 12.7863 20.3551 12.5645 20.1016C12.6278 20.4185 12.8687 20.8622 13.4518 20.8622C14.0349 20.8622 14.2441 20.3551 14.2758 20.1016Z"
            fill="currentColor" />
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M12.1312 22.411C12.1575 22.2914 12.2759 22.2157 12.3956 22.2421L14.6347 22.735C14.7544 22.7614 14.83 22.8797 14.8036 22.9994C14.7773 23.119 14.659 23.1947 14.5393 23.1683L12.3002 22.6753C12.1805 22.649 12.1049 22.5307 12.1312 22.411Z"
            fill="currentColor" />
          <path
            d="M13.4203 27.6754C9.00897 27.7261 5.77228 23.6613 4.70536 21.6225C4.54691 21.3197 4.42016 21.2739 4.32509 21.3373C4.17297 21.4387 4.28282 21.6437 4.32507 21.7493C4.85747 22.9916 5.58213 24.0416 5.87791 24.4113C4.83846 26.1353 4.49409 27.855 4.45183 28.4994C6.1758 26.8008 7.91668 26.8832 8.57162 27.1367C13.7055 29.7987 16.5577 27.929 18.1739 27.1367C19.4669 26.5029 21.4803 27.7388 22.3254 28.436C22.224 26.8642 21.3747 25.1402 20.9627 24.4747C21.6282 23.5873 22.1669 22.5099 22.4522 21.9711C22.6803 21.5401 22.6106 21.369 22.5472 21.3373C22.3951 21.2613 22.2092 21.4958 22.1353 21.6225C21.6599 22.4148 18.9345 27.6121 13.4203 27.6754Z"
            fill="currentColor" />
        </svg>
      </a>
      <a class="navbar-brand p-0 me-0 position-absolute top-50 start-50 translate-middle d-lg-none" href="/"
        aria-label="jinydev">
        <svg width="100" height="26" viewBox="0 0 112 29" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M24.2746 5.33377C25.8486 7.33981 25.1183 11.1792 24.3961 13.0177C24.4028 13.0199 24.4094 13.0221 24.4161 13.0243L24.4013 13.0248L22.649 12.9082C22.649 12.9053 22.6488 12.9013 22.649 12.8993C22.9902 8.93373 22.5975 7.34575 22.2147 7.07677C17.6316 10.3896 13.5379 9.33658 12.2725 9.01111C11.928 8.9225 11.7932 8.88781 11.9152 9.00988C12.2872 9.38185 13.1336 9.82821 13.7371 10.1465H13.7372L13.7376 10.1467C13.8743 10.2188 13.9985 10.2843 14.1019 10.3409C9.12673 10.3984 7.12659 8.00279 6.53855 7.29846C6.47859 7.22664 6.4333 7.1724 6.40105 7.14015C6.11408 6.85318 4.49961 5.87252 3.99256 7.74227C3.50142 9.55335 3.81246 11.6775 3.97665 12.7988C3.99089 12.896 3.99257 12.8981 3.99257 12.9298L2.37635 13.0248L2.37213 13.0247C0.223493 8.05534 1.83854 5.26971 3.29536 4.2246C3.29536 1.78444 6.27428 -0.592359 10.0455 0.263262C14.8768 1.64043 16.3468 1.18409 18.0759 0.647278C18.774 0.430562 19.5143 0.200726 20.5351 0.073124C25.2219 -0.512739 26.7993 2.56612 27 4.16122C26.2141 3.70487 24.8556 4.73165 24.2746 5.33377ZM12.3374 1.5872C11.1225 1.16466 7.99257 0.717209 6.3478 2.41116C5.98397 2.78587 5.55554 3.48864 5.55554 3.48864C5.55554 3.48864 4.82665 4.81961 4.25622 4.24919C3.68579 3.67878 5.0168 1.96749 6.06259 1.46044C7.10838 0.953388 9.70703 0.0660505 12.3374 1.5872Z"
            fill="currentColor" />
          <path
            d="M10.078 13.5002H3.10601C2.2309 13.5002 1.52148 14.2097 1.52148 15.0848V18.3172C1.52148 19.1923 2.2309 19.9018 3.10601 19.9018H10.078C10.9531 19.9018 11.6625 19.1923 11.6625 18.3172V15.0848C11.6625 14.2097 10.9531 13.5002 10.078 13.5002Z"
            stroke="currentColor" stroke-width="1.26763" />
          <path
            d="M0.823513 14.6094H0.379847C0.187322 14.6094 0.03125 14.7654 0.03125 14.958V15.9721C0.03125 16.1646 0.187322 16.3207 0.379847 16.3207H0.823513C1.01604 16.3207 1.17211 16.1646 1.17211 15.9721V14.958C1.17211 14.7654 1.01604 14.6094 0.823513 14.6094Z"
            fill="currentColor" stroke="currentColor" stroke-width="0.0633813" />
          <path
            d="M16.7326 13.5002H23.7045C24.5796 13.5002 25.2891 14.2097 25.2891 15.0848V18.3172C25.2891 19.1923 24.5796 19.9018 23.7045 19.9018H16.7326C15.8575 19.9018 15.1481 19.1923 15.1481 18.3172V15.0848C15.1481 14.2097 15.8575 13.5002 16.7326 13.5002Z"
            stroke="currentColor" stroke-width="1.26763" />
          <path
            d="M25.9861 14.6094H26.4297C26.6222 14.6094 26.7783 14.7654 26.7783 14.958V15.9721C26.7783 16.1646 26.6222 16.3207 26.4297 16.3207H25.9861C25.7935 16.3207 25.6375 16.1646 25.6375 15.9721V14.958C25.6375 14.7654 25.7935 14.6094 25.9861 14.6094Z"
            fill="currentColor" stroke="currentColor" stroke-width="0.0633813" />
          <path
            d="M12.2954 15.5601H14.5137C14.7062 15.5601 14.8623 15.7161 14.8623 15.9087V16.9228C14.8623 17.1153 14.7062 17.2713 14.5137 17.2713H12.2954C12.1028 17.2713 11.9468 17.1153 11.9468 16.9228V15.9087C11.9468 15.7161 12.1028 15.5601 12.2954 15.5601Z"
            fill="currentColor" stroke="currentColor" stroke-width="0.0633813" />
          <path
            d="M9.93343 16.3937C9.93343 16.7087 9.76317 16.9641 9.55314 16.9641C9.34311 16.9641 9.17285 16.7087 9.17285 16.3937C9.17285 16.0786 9.34311 15.8232 9.55314 15.8232C9.76317 15.8232 9.93343 16.0786 9.93343 16.3937Z"
            fill="currentColor" />
          <path
            d="M16.9688 16.3937C16.9688 16.7087 17.139 16.9641 17.3491 16.9641C17.5591 16.9641 17.7293 16.7087 17.7293 16.3937C17.7293 16.0786 17.5591 15.8232 17.3491 15.8232C17.139 15.8232 16.9688 16.0786 16.9688 16.3937Z"
            fill="currentColor" />
          <path
            d="M14.2758 20.1016C13.642 20.6086 12.7863 20.3551 12.5645 20.1016C12.6278 20.4185 12.8687 20.8622 13.4518 20.8622C14.0349 20.8622 14.2441 20.3551 14.2758 20.1016Z"
            fill="currentColor" />
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M12.1312 22.411C12.1575 22.2914 12.2759 22.2157 12.3956 22.2421L14.6347 22.735C14.7544 22.7614 14.83 22.8797 14.8036 22.9994C14.7773 23.119 14.659 23.1947 14.5393 23.1683L12.3002 22.6753C12.1805 22.649 12.1049 22.5307 12.1312 22.411Z"
            fill="currentColor" />
          <path
            d="M13.4203 27.6754C9.00897 27.7261 5.77228 23.6613 4.70536 21.6225C4.54691 21.3197 4.42016 21.2739 4.32509 21.3373C4.17297 21.4387 4.28282 21.6437 4.32507 21.7493C4.85747 22.9916 5.58213 24.0416 5.87791 24.4113C4.83846 26.1353 4.49409 27.855 4.45183 28.4994C6.1758 26.8008 7.91668 26.8832 8.57162 27.1367C13.7055 29.7987 16.5577 27.929 18.1739 27.1367C19.4669 26.5029 21.4803 27.7388 22.3254 28.436C22.224 26.8642 21.3747 25.1402 20.9627 24.4747C21.6282 23.5873 22.1669 22.5099 22.4522 21.9711C22.6803 21.5401 22.6106 21.369 22.5472 21.3373C22.3951 21.2613 22.2092 21.4958 22.1353 21.6225C21.6599 22.4148 18.9345 27.6121 13.4203 27.6754Z"
            fill="currentColor" />
          <text x="32" y="21" font-family="Arial, sans-serif" font-weight="bold" font-size="22"
            fill="currentColor">Jiny</text>
        </svg>
      </a>

      <!-- Mobile: Right Toggle (Menu) -->
      <div class="d-flex d-lg-none ms-auto">
        <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#bdNavbar"
          aria-controls="bdNavbar" aria-label="Toggle navigation">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grid"
            viewBox="0 0 16 16">
            <path
              d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z" />
          </svg>
        </button>
      </div>

      <!-- OffCanvas -->
      <div class="offcanvas-lg offcanvas-end flex-grow-1" tabindex="-1" id="bdNavbar"
        aria-labelledby="bdNavbarOffcanvasLabel" data-bs-scroll="true">
        <!-- OffCanver Header -->
        <div class="offcanvas-header px-4 pb-0">
          <h5 class="offcanvas-title text-white" id="bdNavbarOffcanvasLabel">Jiny</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"
            data-bs-target="#bdNavbar">
          </button>
        </div>

        <!-- OffCanver Body -->
        <div class="offcanvas-body p-4 pt-0 p-lg-0">
          <hr class="d-lg-none text-white-50">

          <ul class="navbar-nav flex-column flex-lg-row bd-navbar-nav">
            
            <li class="nav-item">
              <a class="nav-link py-2 px-0 px-lg-2" href="/part01/">자바 기초</a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link py-2 px-0 px-lg-2" href="/part02/">객체지향</a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link py-2 px-0 px-lg-2" href="/part03/">라이브러리</a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link py-2 px-0 px-lg-2" href="/part04/">데이터 I/O</a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link py-2 px-0 px-lg-2" href="/part05/">최신 자바</a>
            </li>
            
          </ul>

          <hr class="d-lg-none text-white-50">

          <ul class="navbar-nav flex-row flex-wrap ms-md-auto">
            <li class="nav-item col-6 col-lg-auto">
              <a class="nav-link py-2 px-0 px-lg-2" href="https://github.com/jinydev/datas" target="_blank"
                rel="noopener">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="navbar-nav-svg"
                  viewBox="0 0 512 499.36" role="img">
                  <title>GitHub</title>
                  <path fill="currentColor" fill-rule="evenodd"
                    d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z">
                  </path>
                </svg>
                <small class="d-lg-none ms-2">GitHub</small>
              </a>
            </li>

            <li class="nav-item py-2 py-lg-1 col-12 col-lg-auto">
              <div class="vr d-none d-lg-flex h-100 mx-lg-2 text-white"></div>
              <hr class="d-lg-none my-2 text-white-50">
            </li>

            <li class="nav-item col-6 col-lg-auto">
              <a class="nav-link py-2 px-0 px-lg-2" href="https://jiny.dev" aria-label="Home">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="navbar-nav-svg"
                  viewBox="0 0 16 16" role="img">
                  <title>Home</title>
                  <path fill="currentColor"
                    d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z" />
                </svg>
                <small class="d-lg-none ms-2">Home</small>
              </a>
            </li>
          </ul>

        </div>
      </div>
    </nav>
  </header>

  <div class="container bd-gutter mt-3 my-md-4 bd-layout">
    <aside class="bd-sidebar scrollBar">
        <div class="offcanvas-lg offcanvas-start" tabindex="-1" id="bdSidebar"
            aria-labelledby="bdSidebarOffcanvasLabel">
            <div class="offcanvas-header border-bottom">
                <h5 class="offcanvas-title" id="bdSidebarOffcanvasLabel">학습목차</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"
                    data-bs-target="#bdSidebar"></button>
            </div>

            <div class="offcanvas-body">
                <!-- 네비게이션 -->
                <nav class="bd-links w-100" id="bd-docs-nav" aria-label="Docs navigation">
  <ul class="bd-links-nav list-unstyled mb-0 pb-3 pb-md-2 pe-lg-2">
    <li class="bd-links-group py-2">
      <strong class="bd-links-heading d-flex w-100 align-items-center fw-semibold">
        강의 목차
      </strong>
      <ul class="list-unstyled fw-normal pb-2 small">
        
        

        
        <li>
          
          
          
          <button
            class="bd-links-link bd-links-btn btn d-inline-flex align-items-center rounded border-0  w-100"
            data-bs-toggle="collapse" data-bs-target="#collapse-1"
            aria-expanded="true">
            21. 자바 21에서 강화된 언어 및 라이브러리
            <svg class="bi ms-auto" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
            </svg>
          </button>
          <div class="collapse show" id="collapse-1">
            <ul class="list-unstyled fw-normal pb-1 small ms-3">
              
              <li>
                <a href="/part05/21/"
                  class="bd-links-link d-inline-block rounded active">
                  21. 자바 21에서 강화된 언어 및 라이브러리
                </a>
              </li>
              
              <li>
                <a href="/part05/21/#211-자바-21-버전에서-강화된-내용"
                  class="bd-links-link d-inline-block rounded ">
                  21.1 자바 21 버전에서 강화된 내용
                </a>
              </li>
              
              <li>
                <a href="/part05/21/#212-로컬지역-변수-타입-추론"
                  class="bd-links-link d-inline-block rounded ">
                  21.2 로컬(지역) 변수 타입 추론
                </a>
              </li>
              
              <li>
                <a href="/part05/21/#213-switch-문의-null-처리"
                  class="bd-links-link d-inline-block rounded ">
                  21.3 switch 문의 null 처리
                </a>
              </li>
              
              <li>
                <a href="/part05/21/#214-switch-문의-패턴-매칭"
                  class="bd-links-link d-inline-block rounded ">
                  21.4 switch 문의 패턴 매칭
                </a>
              </li>
              
              <li>
                <a href="/part05/21/#215-레코드-패턴"
                  class="bd-links-link d-inline-block rounded ">
                  21.5 레코드 패턴
                </a>
              </li>
              
              <li>
                <a href="/part05/21/#216-가상-스레드"
                  class="bd-links-link d-inline-block rounded ">
                  21.6 가상 스레드
                </a>
              </li>
              
              <li>
                <a href="/part05/21/#217-순차-컬렉션"
                  class="bd-links-link d-inline-block rounded ">
                  21.7 순차 컬렉션
                </a>
              </li>
              
              <li>
                <a href="/part05/21/#218-기본-문자셋-변경"
                  class="bd-links-link d-inline-block rounded ">
                  21.8 기본 문자셋 변경
                </a>
              </li>
              
            </ul>
          </div>
          
        </li>
        
        <li>
          
          
          
          <button
            class="bd-links-link bd-links-btn btn d-inline-flex align-items-center rounded border-0 collapsed w-100"
            data-bs-toggle="collapse" data-bs-target="#collapse-2"
            aria-expanded="false">
            22. 부록 (Appendix)
            <svg class="bi ms-auto" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
            </svg>
          </button>
          <div class="collapse " id="collapse-2">
            <ul class="list-unstyled fw-normal pb-1 small ms-3">
              
              <li>
                <a href="/part05/22/"
                  class="bd-links-link d-inline-block rounded ">
                  22. 부록 (Appendix)
                </a>
              </li>
              
            </ul>
          </div>
          
        </li>
        
        <li>
          
          
          
          <button
            class="bd-links-link bd-links-btn btn d-inline-flex align-items-center rounded border-0 collapsed w-100"
            data-bs-toggle="collapse" data-bs-target="#collapse-3"
            aria-expanded="false">
            23. 부록 (Swing)
            <svg class="bi ms-auto" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
            </svg>
          </button>
          <div class="collapse " id="collapse-3">
            <ul class="list-unstyled fw-normal pb-1 small ms-3">
              
              <li>
                <a href="/part05/23/"
                  class="bd-links-link d-inline-block rounded ">
                  23. 부록 (Swing)
                </a>
              </li>
              
            </ul>
          </div>
          
        </li>
        
        <li>
          
          
          
          <button
            class="bd-links-link bd-links-btn btn d-inline-flex align-items-center rounded border-0 collapsed w-100"
            data-bs-toggle="collapse" data-bs-target="#collapse-4"
            aria-expanded="false">
            24. 부록 (JavaFX)
            <svg class="bi ms-auto" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
            </svg>
          </button>
          <div class="collapse " id="collapse-4">
            <ul class="list-unstyled fw-normal pb-1 small ms-3">
              
              <li>
                <a href="/part05/24/"
                  class="bd-links-link d-inline-block rounded ">
                  24. 부록 (JavaFX)
                </a>
              </li>
              
            </ul>
          </div>
          
        </li>
        
        <li>
          
          
          
          <button
            class="bd-links-link bd-links-btn btn d-inline-flex align-items-center rounded border-0 collapsed w-100"
            data-bs-toggle="collapse" data-bs-target="#collapse-5"
            aria-expanded="false">
            25. 부록 (NIO)
            <svg class="bi ms-auto" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
            </svg>
          </button>
          <div class="collapse " id="collapse-5">
            <ul class="list-unstyled fw-normal pb-1 small ms-3">
              
              <li>
                <a href="/part05/25/"
                  class="bd-links-link d-inline-block rounded ">
                  25. 부록 (NIO)
                </a>
              </li>
              
            </ul>
          </div>
          
        </li>
        
      </ul>
    </li>
  </ul>
</nav>
            </div>
        </div>
    </aside>

    <main class="bd-main order-1">
        <nav aria-label="breadcrumb" class="mt-3">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        
        
        
        
        
        
        
        
        
        <li class="breadcrumb-item"><a href="/part05/">Part05</a></li>
        
        
        
        
        
        
        <li class="breadcrumb-item active" aria-current="page">Chapter 21. 자바 21에서 강화된 언어 및 라이브러리</li>
        
        
        
    </ol>
</nav>
        <div class="bd-content ps-lg-2">
            <h1 id="chapter-21-자바-21에서-강화된-언어-및-라이브러리">Chapter 21. 자바 21에서 강화된 언어 및 라이브러리</h1>

<h2 id="211-자바-21-버전에서-강화된-내용">21.1 자바 21 버전에서 강화된 내용</h2>

<p>자바는 새로운 버전이 출시될 때마다 확정된 기능과 미리 보기(시험적) 기능을 포함하고 있다. 미리 보기 기능은 향후 변경될 여지가 있으므로 우리 책에서는 확정된 기능만을 다루도록 한다. 가능하면 본문의 Part 04 ‘데이터 입출력’까지 학습을 마친 뒤에 21장을 학습하길 권장한다. 최신 자바 버전에서 강화된 내용 중에는 자바 17까지의 내용을 알아야 이해되는 것이 있기 때문이다.</p>

<p>자바 21에서 강화된 언어 및 라이브러리 기능을 요약하면 다음과 같다.</p>

<ul>
  <li><strong>로컬(지역) 변수 타입 추론</strong>: 생성자나 메소드에서 선언되는 로컬(지역) 변수는 명시적 타입 대신 <code class="language-plaintext highlighter-rouge">var</code>를 사용해서 컴파일 시에 타입 추론을 할 수 있다. 이 기능의 도입으로 복잡한 코드가 간결해졌다. 이 기능은 자바 11부터 사용할 수 있지만, 우리 책에서는 21장에서 처음 소개한다.</li>
  <li><strong>switch 문의 null 처리 및 패턴 매칭</strong>: 자바 17까지는 표현값이 <code class="language-plaintext highlighter-rouge">null</code>일 경우 switch 문에서 <code class="language-plaintext highlighter-rouge">NullPointerException</code>이 발생했지만, 자바 21부터는 레이블에 <code class="language-plaintext highlighter-rouge">null</code>을 지정해서 예외를 발생시키지 않고 <code class="language-plaintext highlighter-rouge">null</code> 처리를 할 수 있게 되었다. 또한 레이블에 패턴과 가드를 작성해서 표현값과 매칭시킬 수도 있다.</li>
  <li><strong>레코드 패턴</strong>: 자바 21에서 지원하는 레코드 패턴(Record Patterns)은 레코드의 필드값을 분해해서 변수에 대입하는 기능을 제공한다. 레코드의 필드값을 얻기 위해 Getter를 호출할 필요 없이 바로 매개변수로 받을 수 있어 매우 편리해졌다.</li>
  <li><strong>가상 스레드</strong>: 자바 21부터 사용할 수 있는 가장 주목해야 할 기능은 가상(Virtual) 스레드이다. 가상 스레드는 처리량이 높은 동시 애플리케이션을 개발할 때 사용할 수 있는 경량(Lightweight) 스레드이다.</li>
  <li><strong>순차 컬렉션</strong>: 자바 21은 순서가 있는 컬렉션을 묶고 공통 API를 제공할 목적으로 순차 컬렉션(SequencedCollection), 순차 셋(SequencedSet), 순차 맵(SequencedMap) 인터페이스를 추가하고, 기존 인터페이스의 상속 관계를 수정했다.</li>
  <li><strong>기본 문자셋 변경</strong>: 자바는 JVM이 실행될 때 운영체제 환경에 따라 자바 기본 문자셋이 결정되었다. macOS는 UTF-8을 기본 문자셋으로 사용했고, 한글 Windows는 x-windows-949(MS949)를 사용했다. 자바 21에서는 자바 기본 문자셋이 UTF-8로 통일되었다. 이로써 운영체제 환경에 의존하지 않고 어떤 실행 환경에서든 모두 UTF-8 문자셋을 사용한다.</li>
</ul>

<h2 id="212-로컬지역-변수-타입-추론">21.2 로컬(지역) 변수 타입 추론</h2>

<p>자바 11부터는 로컬(지역) 변수를 위한 타입 추론(type inference for local variable) 기능을 사용할 수 있다. 로컬 변수를 선언할 때 예약된 타입(reserved type)인 <code class="language-plaintext highlighter-rouge">var</code>를 사용하면 컴파일 시에 로컬 변수에 대입되는 값을 보고 컴파일러가 추론(inference)해서 타입을 결정한다.</p>

<p>전통적으로 자바는 로컬 변수를 선언할 때 대입되는 값에 따라서 다음과 같이 구체적인 타입을 사용해야 한다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">method</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"홍길동"</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">25</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>위 코드를 예약된 타입인 <code class="language-plaintext highlighter-rouge">var</code>로 변경하면 대입되는 값에 상관없이 다음과 같이 작성할 수 있다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">method</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">var</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"홍길동"</span><span class="o">;</span>
    <span class="kt">var</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">25</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">name</code>에는 문자열이 대입되었고, <code class="language-plaintext highlighter-rouge">age</code>에는 정수가 대입되었기 때문에 컴파일 시에 각각 <code class="language-plaintext highlighter-rouge">String</code>과 <code class="language-plaintext highlighter-rouge">int</code> 타입으로 최종 결정된다.</p>

<p>로컬 변수 타입 추론 기능은 개발자들 사이에서 다소 논란이 있다. 코드의 간결성을 중요시하는 사람들은 환영하지만, 코드의 가독성을 중요시하는 사람들은 중요한 타입 정보가 없어짐에 따라 가독성이 떨어져서 나쁜 코드가 작성될 수 있다고 말한다. 필자도 가독성이 떨어진다는 생각에는 동의하지 않지만, 변수 이름만 잘 지어 준다면 <code class="language-plaintext highlighter-rouge">var</code>를 사용하더라도 가독성을 크게 해치지 않는다.</p>

<h3 id="예약된-타입-var-제한">예약된 타입 var 제한</h3>

<p>예약된 타입 <code class="language-plaintext highlighter-rouge">var</code>는 생성자(Constructor) 또는 메소드(Method) 안에서 로컬 변수를 선언할 때만 사용할 수 있다. 클래스나 인터페이스의 필드를 선언할 때는 사용할 수 없다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">클래스명</span> <span class="o">{</span>
    <span class="c1">// var 필드명;  // 컴파일 에러</span>
<span class="o">}</span>
<span class="kd">interface</span> <span class="nc">인터페이스명</span> <span class="o">{</span>
    <span class="c1">// var 상수명 = 값; // 컴파일 에러</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="213-switch-문의-null-처리">21.3 switch 문의 null 처리</h2>

<p>자바 17까지는 표현값이 <code class="language-plaintext highlighter-rouge">null</code>일 경우 switch 문에서 <code class="language-plaintext highlighter-rouge">NullPointerException</code>이 발생했지만, 자바 21부터는 다음과 같이 레이블에 <code class="language-plaintext highlighter-rouge">null</code>을 지정해서 예외를 발생시키지 않고 <code class="language-plaintext highlighter-rouge">null</code>을 처리할 수 있게 되었다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">switch</span> <span class="o">(</span><span class="n">object</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="kc">null</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span> <span class="c1">// object가 null일 경우 선택</span>
    <span class="k">case</span> <span class="kc">null</span><span class="o">,</span> <span class="k">default</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span> <span class="c1">// object가 null이거나 위의 case가 선택되지 않은 경우 선택</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="214-switch-문의-패턴-매칭">21.4 switch 문의 패턴 매칭</h2>

<p>자바 21부터는 다음과 같이 switch 레이블에 패턴과 가드를 작성해서 표현값과 매칭시킬 수도 있다. 이 방식은 표현값이 객체를 참조하는 변수일 경우에만 사용할 수 있다.</p>

<h3 id="레이블에-패턴-사용">레이블에 패턴 사용</h3>

<p>소괄호 안의 표현값이 참조 타입 변수일 경우 패턴을 사용해서 타입 검사를 수행하고, 자동 타입 변환해서 패턴 변수를 초기화시킨다. 그리고 패턴 변수를 중괄호 블록에서 사용할 수 있다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">switch</span> <span class="o">(</span><span class="n">object</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">Integer</span> <span class="n">i</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span> <span class="c1">// object가 Integer 타입인 경우 매칭 (자동 타입 변환)</span>
    <span class="k">case</span> <span class="nc">String</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span> <span class="c1">// object가 String 타입인 경우 매칭 (자동 타입 변환)</span>
    <span class="k">case</span> <span class="kc">null</span><span class="o">,</span> <span class="k">default</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span> <span class="c1">// object가 null이거나 그 이외의 타입일 경우 매칭</span>
<span class="o">}</span>
</code></pre></div></div>

<p>표현값은 패턴 중 하나와 반드시 매칭되도록 해야 한다. 만약 매칭할 패턴이 없을 경우에는 나머지 매칭을 위해 <code class="language-plaintext highlighter-rouge">default</code>를 포함해야 한다. 이것을 표현값과 실행문의 완전성(exhaustiveness)이라고 하는데, 표현값이 반드시 실행문에서 처리되어야 함을 뜻한다.</p>

<h3 id="가드-사용">가드 사용</h3>

<p>패턴과 함께 좀 더 상세한 일치 조건을 만들기 위해 <code class="language-plaintext highlighter-rouge">when</code>으로 시작하는 가드(guard)를 사용할 수 있다. <code class="language-plaintext highlighter-rouge">when</code> 다음에는 패턴 변수를 사용해서 <code class="language-plaintext highlighter-rouge">boolean</code>을 리턴하는 조건식 또는 메소드 호출 코드가 올 수 있다. <code class="language-plaintext highlighter-rouge">true</code>를 리턴하면 레이블이 선택되고 중괄호가 실행된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">switch</span> <span class="o">(</span><span class="n">object</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">Integer</span> <span class="n">i</span> <span class="n">when</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span> <span class="c1">// object가 Integer 타입이면서 양수일 경우 선택</span>
    <span class="k">case</span> <span class="nc">String</span> <span class="n">s</span> <span class="n">when</span> <span class="n">s</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"a"</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span> <span class="c1">// object가 String 타입이면서 "a"일 경우 선택</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="레이블-통과">레이블 통과</h3>

<p>레이블에 패턴이 사용되면 기본적으로 다음 레이블로 통과가 금지된다. 단, 다음이 <code class="language-plaintext highlighter-rouge">default</code>라면 통과할 수 있지만 화살표가 사용되면 무조건 통과가 금지된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">switch</span> <span class="o">(</span><span class="n">object</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">String</span> <span class="nl">s:</span>
        <span class="c1">// break; // 생략하면 컴파일 에러 생김 (다음 레이블로 무조건 통과 금지)</span>
    <span class="k">case</span> <span class="nc">Integer</span> <span class="nl">i:</span>
        <span class="c1">// break; // 명시적 통과 금지</span>
    <span class="k">default</span><span class="o">:</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="레이블-작성-순서">레이블 작성 순서</h3>

<p>레이블이 패턴일 경우에는 좁은 범위의 패턴을 먼저 작성하고, 넓은 범위의 패턴을 나중에 작성해야 한다. switch 문은 위에서부터 순차적으로 표현값과 패턴을 매칭하기 때문에 위쪽 패턴이 먼저 매칭되면 아래쪽 패턴은 검사하지 않는다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Integer</span> <span class="n">data</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
<span class="k">switch</span> <span class="o">(</span><span class="n">data</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="mi">0</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span> <span class="c1">// ①</span>
    <span class="k">case</span> <span class="nc">Integer</span> <span class="n">i</span> <span class="n">when</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"0 or positive number"</span><span class="o">);</span> <span class="c1">// ②</span>
    <span class="k">case</span> <span class="nc">Integer</span> <span class="n">i</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"negative number"</span><span class="o">);</span> <span class="c1">// ③</span>
<span class="o">}</span>
</code></pre></div></div>

<p>정수의 범위를 비교하면 ①보다 ③이 넓고, ②보다 ③이 넓다. 따라서 레이블을 작성할 때 ①, ② 뒤에 ③이 오도록 작성해야 한다. 순서를 바꾸면 컴파일 에러가 발생한다.</p>

<h3 id="인터페이스-타입의-표현값과-enum-레이블">인터페이스 타입의 표현값과 enum 레이블</h3>

<p>자바 21에서는 패턴 매칭을 사용할 수 있기 때문에 표현값에 인터페이스 타입이 올 수 있다. 인터페이스는 여러 가지 <code class="language-plaintext highlighter-rouge">enum</code>을 그룹핑할 목적으로 사용할 수 있다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">sealed</span> <span class="kd">interface</span> <span class="nc">Drawable</span> <span class="n">permits</span> <span class="nc">Shape</span><span class="o">,</span> <span class="nc">Image</span> <span class="o">{</span> <span class="o">}</span>

<span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Shape</span> <span class="kd">implements</span> <span class="nc">Drawable</span> <span class="o">{</span> <span class="no">LINE</span><span class="o">,</span> <span class="no">TRIANGLE</span><span class="o">,</span> <span class="no">RECTANGLE</span> <span class="o">}</span>
<span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Image</span> <span class="kd">implements</span> <span class="nc">Drawable</span> <span class="o">{</span> <span class="no">JPEG</span><span class="o">,</span> <span class="no">PNG</span> <span class="o">}</span>
</code></pre></div></div>

<p>자바 21에서는 switch 문의 표현값이 <code class="language-plaintext highlighter-rouge">Drawable</code> 타입이라면 <code class="language-plaintext highlighter-rouge">Drawable</code>로 그룹핑된 모든 <code class="language-plaintext highlighter-rouge">enum</code> 상수를 레이블로 작성할 수 있다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">result</span> <span class="o">=</span> <span class="k">switch</span> <span class="o">(</span><span class="n">drawable</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">Shape</span><span class="o">.</span><span class="na">LINE</span> <span class="o">-&gt;</span> <span class="s">"선을 그립니다."</span><span class="o">;</span>
    <span class="k">case</span> <span class="nc">Shape</span><span class="o">.</span><span class="na">TRIANGLE</span> <span class="o">-&gt;</span> <span class="s">"삼각형을 그립니다."</span><span class="o">;</span>
    <span class="k">case</span> <span class="nc">Shape</span><span class="o">.</span><span class="na">RECTANGLE</span> <span class="o">-&gt;</span> <span class="s">"사각형을 그립니다."</span><span class="o">;</span>
    <span class="k">case</span> <span class="nc">Image</span><span class="o">.</span><span class="na">JPEG</span> <span class="o">-&gt;</span> <span class="s">"JPEG 이미지를 그립니다."</span><span class="o">;</span>
    <span class="k">case</span> <span class="nc">Image</span><span class="o">.</span><span class="na">PNG</span> <span class="o">-&gt;</span> <span class="s">"PNG 이미지를 그립니다."</span><span class="o">;</span>
    <span class="k">default</span> <span class="o">-&gt;</span> <span class="s">"도형을 그리지 않습니다."</span><span class="o">;</span>
<span class="o">};</span>
</code></pre></div></div>

<h2 id="215-레코드-패턴">21.5 레코드 패턴</h2>

<p>자바 21에서 지원하는 레코드 패턴(Record Patterns)은 레코드의 필드값을 분해해서 변수에 대입하는 기능을 제공한다. 레코드의 필드값을 얻기 위해 Getter를 호출할 필요 없이 매개변수로 바로 받을 수 있어 매우 편리해졌다.</p>

<p>레코드 패턴은 <code class="language-plaintext highlighter-rouge">instanceof</code> 연산자와 switch 문의 레이블에서 다음과 같이 작성될 수 있다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">(</span><span class="n">obj</span> <span class="k">instanceof</span> <span class="n">레코드</span><span class="o">(</span><span class="n">타입</span> <span class="n">변수</span><span class="o">,</span> <span class="n">타입</span> <span class="n">변수</span><span class="o">))</span> <span class="o">{</span>
    <span class="c1">// 레코드 패턴 변수 사용</span>
<span class="o">}</span>

<span class="k">switch</span> <span class="o">(</span><span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="n">레코드</span><span class="o">(</span><span class="n">타입</span> <span class="n">변수</span><span class="o">,</span> <span class="n">타입</span> <span class="n">변수</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="c1">// 레코드 패턴 변수 사용</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>예를 들어, <code class="language-plaintext highlighter-rouge">Rectangle</code> 레코드가 있다면:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">record</span> <span class="nf">Rectangle</span><span class="o">(</span><span class="kt">int</span> <span class="n">width</span><span class="o">,</span> <span class="kt">int</span> <span class="n">height</span><span class="o">)</span> <span class="o">{}</span>

<span class="c1">// 자바 21 레코드 패턴</span>
<span class="k">if</span> <span class="o">(</span><span class="n">obj</span> <span class="k">instanceof</span> <span class="nf">Rectangle</span><span class="o">(</span><span class="kt">int</span> <span class="n">width</span><span class="o">,</span> <span class="kt">int</span> <span class="n">height</span><span class="o">))</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"area: "</span> <span class="o">+</span> <span class="o">(</span><span class="n">width</span> <span class="o">*</span> <span class="n">height</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="216-가상-스레드">21.6 가상 스레드</h2>

<p>자바 21부터 사용할 수 있는 기능 중 가장 주목해야 할 것은 가상(Virtual) 스레드이다. 가상 스레드는 처리량이 높은 동시 애플리케이션을 개발할 때 사용할 수 있는 경량(Lightweight) 스레드이다.</p>

<h3 id="가상-스레드-개요">가상 스레드 개요</h3>

<p>지금까지 자바 개발자들은 서버 애플리케이션에서 사용자 요청을 동시에 처리(요청별 스레드)하기 위해 스레드 풀링을 사용했다. 자바 17까지의 스레드는 운영체제가 제공하는 플랫폼(Platform) 스레드를 래핑했기 때문에 스레드와 플랫폼 스레드가 1:1로 매핑되었다. 플랫폼 스레드는 비용이 많이 들기 때문에 애플리케이션은 스레드의 수를 제한해서 사용해야 했었다.</p>

<p>이러한 단점을 해결하기 위해 자바 21에서는 CPU를 효율적으로 이용하면서 동시 처리량을 확장할 수 있도록 가상 스레드를 제공한다. 스레드가 플랫폼 스레드와 1:1로 매핑된다면 가상 스레드는 플랫폼 스레드와 n:1로 매핑된다. 다수의 가상 스레드가 한 개의 플랫폼 스레드와 매핑되기 때문에 플랫폼 스레드의 부족 문제를 해결할 수 있게 된다.</p>

<p>가상 스레드는 CPU에서 계산을 수행하는 동안만 플랫폼 스레드를 사용한다. 가상 스레드가 블로킹 I/O 작업(파일 입출력, 네트워킹)을 수행할 경우 가상 스레드는 일시 중지되지만, 플랫폼 스레드는 일시 중지되지 않고 다른 가상 스레드의 작업을 처리한다. 그렇기 때문에 CPU 활용도는 최적으로 끌어올리면서 높은 동시 처리량을 달성할 수 있다.</p>

<blockquote>
  <p><strong>참고</strong>: 자바 API 도큐먼트에서는 자바 21 이전까지의 일반적인 스레드(Thread)를 플랫폼 스레드라고 부른다.</p>
</blockquote>

<h3 id="가상-스레드풀-생성">가상 스레드풀 생성</h3>

<p>가상 스레드는 메모리가 부족하지 않다면 개수를 무제한으로 사용할 수 있기 때문에 스레드풀에서 최대 개수를 제한할 필요가 없다. 실제로 가상 스레드풀을 생성하는 <code class="language-plaintext highlighter-rouge">Executors</code>의 메소드는 최대 개수를 입력받지 않는다.</p>

<ul>
  <li><strong>플랫폼 스레드풀</strong>: <code class="language-plaintext highlighter-rouge">ExecutorService platformExecutor = Executors.newFixedThreadPool(최대 개수);</code></li>
  <li><strong>가상 스레드풀</strong>: <code class="language-plaintext highlighter-rouge">ExecutorService virtualExecutor = Executors.newVirtualThreadPerTaskExecutor();</code></li>
</ul>

<p>가상 스레드는 스레드풀에서 풀링되어서는 안 되고, 작업 건수별로 새로운 가상 스레드를 생성해서 처리해야 한다.</p>

<h3 id="가상-스레드-생성">가상 스레드 생성</h3>

<p>자바 21부터는 가상 스레드를 생성하기 위해 새로운 정적 메소드 2개가 추가되었다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Thread.startVirtualThread(Runnable task)</code></li>
  <li><code class="language-plaintext highlighter-rouge">Thread.ofVirtual().start(Runnable task)</code></li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 방법 1</span>
<span class="nc">Thread</span><span class="o">.</span><span class="na">startVirtualThread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// 작업 내용</span>
<span class="o">});</span>

<span class="c1">// 방법 2</span>
<span class="nc">Thread</span><span class="o">.</span><span class="na">ofVirtual</span><span class="o">().</span><span class="na">start</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// 작업 내용</span>
<span class="o">});</span>
</code></pre></div></div>

<h3 id="플랫폼-스레드-생성">플랫폼 스레드 생성</h3>

<p>자바 21부터는 플랫폼 스레드를 생성하는 또 다른 방법으로, <code class="language-plaintext highlighter-rouge">Thread</code> 클래스에 <code class="language-plaintext highlighter-rouge">ofPlatform()</code> 정적 메소드가 추가되었다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Thread</span><span class="o">.</span><span class="na">ofPlatform</span><span class="o">().</span><span class="na">start</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// 작업 내용</span>
<span class="o">});</span>
</code></pre></div></div>

<h2 id="217-순차-컬렉션">21.7 순차 컬렉션</h2>

<p>자바 21은 순서가 있는 컬렉션을 묶고, 공통 API를 제공할 목적으로 <strong>순차 컬렉션(SequencedCollection)</strong>, <strong>순차 셋(SequencedSet)</strong>, <strong>순차 맵(SequencedMap)</strong> 인터페이스를 추가하고 기존 인터페이스의 상속 관계를 수정했다.</p>

<h3 id="순차-컬렉션-sequencedcollection">순차 컬렉션 (SequencedCollection)</h3>

<p><code class="language-plaintext highlighter-rouge">SequencedCollection</code>은 순서가 있는 List와 Set 컬렉션의 최상위 인터페이스이다. 다음과 같은 메소드가 선언되어 있다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">void addFirst(E e)</code>: 첫 번째 요소로 추가</li>
  <li><code class="language-plaintext highlighter-rouge">void addLast(E e)</code>: 마지막 요소로 추가</li>
  <li><code class="language-plaintext highlighter-rouge">E getFirst()</code>: 첫 번째 요소를 가져오기</li>
  <li><code class="language-plaintext highlighter-rouge">E getLast()</code>: 마지막 요소를 가져오기</li>
  <li><code class="language-plaintext highlighter-rouge">E removeFirst()</code>: 첫 번째 요소를 제거하기</li>
  <li><code class="language-plaintext highlighter-rouge">E removeLast()</code>: 마지막 요소를 제거하기</li>
  <li><code class="language-plaintext highlighter-rouge">SequencedCollection&lt;E&gt; reversed()</code>: 요소의 순서를 뒤바꾸기</li>
</ul>

<h3 id="순차-set-sequencedset">순차 Set (SequencedSet)</h3>

<p>순서가 있으면서 요소의 중복 저장을 허용하지 않는 순차 Set 컬렉션은 <code class="language-plaintext highlighter-rouge">SequencedCollection</code>의 자식인 <code class="language-plaintext highlighter-rouge">SequencedSet</code> 인터페이스를 별도로 상속받는다. <code class="language-plaintext highlighter-rouge">reversed()</code> 메소드만 리턴 타입을 <code class="language-plaintext highlighter-rouge">SequencedSet&lt;E&gt;</code>로 변경해서 재정의했다.</p>

<p>주의할 점은 <code class="language-plaintext highlighter-rouge">SortedSet</code>을 구현한 <code class="language-plaintext highlighter-rouge">TreeSet</code> 클래스는 요소들을 비교한 후 위치가 결정되기 때문에 <code class="language-plaintext highlighter-rouge">addFirst()</code>, <code class="language-plaintext highlighter-rouge">addLast()</code> 메소드를 사용해서 직접 해당 위치에 요소를 저장할 수 없다. (예외 발생)</p>

<h3 id="순차-map-sequencedmap">순차 Map (SequencedMap)</h3>

<p><code class="language-plaintext highlighter-rouge">SequencedMap</code>은 순서가 있는 Map 컬렉션의 최상위 인터페이스이다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Map.Entry&lt;K, V&gt; firstEntry()</code>: 첫 번째 엔트리 가져오기</li>
  <li><code class="language-plaintext highlighter-rouge">Map.Entry&lt;K, V&gt; lastEntry()</code>: 마지막 엔트리 가져오기</li>
  <li><code class="language-plaintext highlighter-rouge">Map.Entry&lt;K, V&gt; pollFirstEntry()</code>: 첫 번째 엔트리를 가져오고 제거</li>
  <li><code class="language-plaintext highlighter-rouge">Map.Entry&lt;K, V&gt; pollLastEntry()</code>: 마지막 엔트리를 가져오고 제거</li>
  <li><code class="language-plaintext highlighter-rouge">V putFirst(K k, V v)</code>: 첫 번째 요소로 추가하기</li>
  <li><code class="language-plaintext highlighter-rouge">V putLast(K k, V v)</code>: 마지막 요소로 추가하기</li>
  <li><code class="language-plaintext highlighter-rouge">SequencedMap&lt;K, V&gt; reversed()</code>: 엔트리의 순서를 뒤바꾸기</li>
  <li><code class="language-plaintext highlighter-rouge">SequencedSet&lt;Map.Entry&lt;K, V&gt;&gt; sequencedEntrySet()</code>: 엔트리를 요소로 하는 SequencedSet 얻기</li>
  <li><code class="language-plaintext highlighter-rouge">SequencedSet&lt;K&gt; sequencedKeySet()</code>: 키를 요소로 하는 SequencedSet 얻기</li>
  <li><code class="language-plaintext highlighter-rouge">SequencedCollection&lt;V&gt; sequencedValues()</code>: 값을 요소로 하는 SequencedCollection 얻기</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">SortedMap</code>을 구현한 <code class="language-plaintext highlighter-rouge">TreeMap</code>은 <code class="language-plaintext highlighter-rouge">putFirst()</code>, <code class="language-plaintext highlighter-rouge">putLast()</code> 메소드를 사용할 수 없다.</p>

<h3 id="수정할-수-없는-순차-컬렉션">수정할 수 없는 순차 컬렉션</h3>

<p>자바 21에서는 요소를 변경할 수 없도록 수정할 수 없는 순차 컬렉션을 만들기 위해 <code class="language-plaintext highlighter-rouge">Collections</code> 클래스에 다음 정적 메소드가 추가되었다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Collections.unmodifiableSequencedCollection(sequencedCollection)</code></li>
  <li><code class="language-plaintext highlighter-rouge">Collections.unmodifiableSequencedSet(sequencedSet)</code></li>
  <li><code class="language-plaintext highlighter-rouge">Collections.unmodifiableSequencedMap(sequencedMap)</code></li>
</ul>

<h2 id="218-기본-문자셋-변경">21.8 기본 문자셋 변경</h2>

<p>자바는 JVM이 실행될 때 운영체제의 환경에 따라 자바 기본 문자셋이 결정되었다. 맥OS는 UTF-8을 기본 문자셋으로 사용했고, 한글 윈도우는 x-windows-949(MS949)를 사용했다. 자바 21부터는 자바 기본 문자셋이 UTF-8로 통일되었으며, 이로써 운영체제의 환경에 의존하지 않고 어떤 실행 환경에서든 모두 UTF-8 문자셋을 사용한다.</p>

<h3 id="바이트-수">바이트 수</h3>

<p>기본 문자셋이 달라지면 숫자와 영어 문자는 문제가 되지 않지만, 한글 문자는 처리 바이트 수가 달라진다. MS949는 한글 문자를 2byte로 처리하지만, UTF-8은 한글 문자를 3byte로 처리하기 때문이다.</p>

<h3 id="호환성-있는-코드">호환성 있는 코드</h3>

<p>파일 입출력이나 네트워크 통신 시 문자셋 문제로 인한 호환성 문제를 해결하기 위해 명시적으로 문자셋을 지정하는 것이 좋다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="s">"자바"</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">Charset</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">));</span>
<span class="nc">FileWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileWriter</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="nc">Charset</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">));</span>
</code></pre></div></div>

        </div>

        <div class="bd-toc mt-3 mb-5 my-lg-0 ps-xl-3 mb-lg-5 text-body-secondary">

  <button class="btn btn-link p-md-0 mb-2 mb-md-0 text-decoration-none bd-toc-toggle d-md-none" type="button"
    data-bs-toggle="collapse" data-bs-target="#tocContents" aria-expanded="false" aria-controls="tocContents">
    서브목차
    <svg class="bi d-md-none ms-2" aria-hidden="true">
      <use xlink:href="#chevron-expand"></use>
    </svg>
  </button>

  <strong class="d-none d-md-block h6 my-2">서브목차</strong>

  <div class="collapse bd-toc-collapse" id="tocContents">
    <nav id="TableOfContents">
      <!--
      <ul>
        <li><a href="#quick-start">Quick start</a></li>
        <li><a href="#cdn-links">CDN links</a></li>
        <li><a href="#next-steps">Next steps</a></li>
        <li><a href="#js-components">JS components</a></li>
        <li><a href="#important-globals">Important globals</a>
          <ul>
            <li><a href="#html5-doctype">HTML5 doctype</a></li>
            <li><a href="#responsive-meta-tag">Responsive meta tag</a></li>
            <li><a href="#box-sizing">Box-sizing</a></li>
            <li><a href="#reboot">Reboot</a></li>
          </ul>
        </li>
        <li><a href="#community">Community</a></li>
      </ul>
      -->
    </nav>
  </div>
</div>
    </main>
</div>

  <footer class="container">
  <hr class="mt-5 mb-3">
  <div class="row align-items-center pb-3">
    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
      <p class="mb-0 text-secondary">Copyright 2017~2026 JinyDev. All Rights Reserved.</p>
    </div>
    <div class="col-md-6 text-center text-md-end">
      
      <a href="https://datas.jiny.dev" class="text-decoration-none text-secondary ms-3">빅데이터</a>
      
      <a href="https://mysql.jiny.dev" class="text-decoration-none text-secondary ms-3">MySQL</a>
      
      <a href="https://php.jiny.dev" class="text-decoration-none text-secondary ms-3">PHP</a>
      
      <a href="https://java.jiny.dev" class="text-decoration-none text-secondary ms-3">자바</a>
      
      <a href="https://git.jiny.dev" class="text-decoration-none text-secondary ms-3">깃&깃허브</a>
      
      <a href="https://linux.jiny.dev" class="text-decoration-none text-secondary ms-3">리눅스</a>
      
    </div>
  </div>
</footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
    crossorigin="anonymous"></script>
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

    window.addEventListener('load', async function () {
      mermaid.initialize({ startOnLoad: false });

      const mermaidCodes = document.querySelectorAll('pre code.language-mermaid');
      const mermaidDivs = [];

      mermaidCodes.forEach(codeBlock => {
        const mermaidDefinition = codeBlock.textContent.trim();
        const container = codeBlock.closest('div.highlighter-rouge');

        const mermaidDiv = document.createElement('div');
        mermaidDiv.className = 'mermaid';
        mermaidDiv.textContent = mermaidDefinition;

        if (container) {
          container.replaceWith(mermaidDiv);
        } else {
          const pre = codeBlock.parentElement;
          if (pre) pre.replaceWith(mermaidDiv);
        }
        mermaidDivs.push(mermaidDiv);
      });

      if (mermaidDivs.length > 0) {
        await mermaid.run({ nodes: mermaidDivs });
      }
    });
  </script>
  <script src="/assets/js/toc.js"></script>

</body>

</html>