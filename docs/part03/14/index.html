<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- 기본 메타데이터 --><meta name="description" content="Jiny linux"><meta name="author" content="HojinLee"><!-- 제목 설정 --><title>Chapter 14. 멀티 스레드</title>
  <meta name="title" content="Chapter 14. 멀티 스레드" /><!-- 키워드 설정 --><!-- Open Graph 메타데이터 --><meta property="og:title" content="Chapter 14. 멀티 스레드"><meta property="og:description" content="Jiny linux"><meta property="og:type" content="website"><meta property="og:locale" content="ko">
  <meta property="og:site_name" content="linux">
  <meta property="og:url" content="https://java.jiny.dev/part03/14/">

  <!-- Twitter 카드 메타데이터 --><meta name="twitter:card" content="summary"><meta property="twitter:title" content="Chapter 14. 멀티 스레드"><!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Chapter 14. 멀티 스레드" />
<meta name="author" content="Hojin" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="자바 언어를 통한 객체지향 프로그래밍의 이해와 실습" />
<meta property="og:description" content="자바 언어를 통한 객체지향 프로그래밍의 이해와 실습" />
<link rel="canonical" href="https://java.jiny.dev/part03/14/" />
<meta property="og:url" content="https://java.jiny.dev/part03/14/" />
<meta property="og:site_name" content="객체지향 자바 프로그래밍 (Object-Oriented Java Programming)" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Chapter 14. 멀티 스레드" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Hojin"},"description":"자바 언어를 통한 객체지향 프로그래밍의 이해와 실습","headline":"Chapter 14. 멀티 스레드","url":"https://java.jiny.dev/part03/14/"}</script>
<!-- End Jekyll SEO tag -->


  <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
  <link href="/assets/css/docs.css" rel="stylesheet" />
  <link href="/assets/css/highlight.css" rel="stylesheet" />

  <style>
    blockquote {
      border-left: solid 5px #dee2e6;
      padding: 5px 10px;
      background-color: #f8f9fa;
    }
  </style>

  <style>
    h1 a {
      text-decoration: none;
    }

    h2 a {
      text-decoration: none;
    }

    h3 a {
      text-decoration: none;
    }

    h4 a {
      text-decoration: none;
    }

    h5 a {
      text-decoration: none;
    }

    h6 a {
      text-decoration: none;
    }

    img {
      max-width: 100%;
      height: auto;
      vertical-align: top
    }

    strong a {
      text-decoration: none;
      color: inherit;
    }

    /* 스크롤바 커스텀 */
    /* 임의의 영역 생성 */
    .scrollBar {}

    /* 아래의 모든 코드는 영역::코드로 사용 */
    .scrollBar::-webkit-scrollbar {
      width: 7px;
      /* 스크롤바의 너비 */
    }

    .scrollBar::-webkit-scrollbar-thumb {
      height: 30%;
      /* 스크롤바의 길이 */
      background: #cccccc;
      /* 스크롤바의 색상 */

      border-radius: 5px;
    }

    .scrollBar::-webkit-scrollbar-track {
      background: rgba(33, 122, 244, .1);
      /*스크롤바 뒷 배경 색상*/
    }
  </style>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-R4VBPCT3CR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-R4VBPCT3CR');
  </script>


</head>

<body>
  <header class="navbar navbar-expand-lg bd-navbar sticky-top">
    <nav class="container bd-gutter flex-wrap flex-lg-nowrap position-relative" aria-label="Main navigation">

      <!-- Mobile: Left Toggle (Browse) -->
      <div class="bd-navbar-toggle d-lg-none">
        <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#bdSidebar"
          aria-controls="bdSidebar" aria-label="Toggle docs navigation">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="bi" fill="currentColor"
            viewBox="0 0 16 16">
            <path fill-rule="evenodd"
              d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z">
            </path>
          </svg>
          <span class="d-none fs-6 pe-1">Browse</span>
        </button>
      </div>

      <!-- Brand: Desktop (Static), Mobile (Absolute Center) -->
      <a class="navbar-brand p-0 me-0 me-lg-2 ms-lg-0 d-none d-lg-inline-block" href="/" aria-label="jinydev">
        <svg width="32" height="26" viewBox="0 0 32 29" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M24.2746 5.33377C25.8486 7.33981 25.1183 11.1792 24.3961 13.0177C24.4028 13.0199 24.4094 13.0221 24.4161 13.0243L24.4013 13.0248L22.649 12.9082C22.649 12.9053 22.6488 12.9013 22.649 12.8993C22.9902 8.93373 22.5975 7.34575 22.2147 7.07677C17.6316 10.3896 13.5379 9.33658 12.2725 9.01111C11.928 8.9225 11.7932 8.88781 11.9152 9.00988C12.2872 9.38185 13.1336 9.82821 13.7371 10.1465H13.7372L13.7376 10.1467C13.8743 10.2188 13.9985 10.2843 14.1019 10.3409C9.12673 10.3984 7.12659 8.00279 6.53855 7.29846C6.47859 7.22664 6.4333 7.1724 6.40105 7.14015C6.11408 6.85318 4.49961 5.87252 3.99256 7.74227C3.50142 9.55335 3.81246 11.6775 3.97665 12.7988C3.99089 12.896 3.99257 12.8981 3.99257 12.9298L2.37635 13.0248L2.37213 13.0247C0.223493 8.05534 1.83854 5.26971 3.29536 4.2246C3.29536 1.78444 6.27428 -0.592359 10.0455 0.263262C14.8768 1.64043 16.3468 1.18409 18.0759 0.647278C18.774 0.430562 19.5143 0.200726 20.5351 0.073124C25.2219 -0.512739 26.7993 2.56612 27 4.16122C26.2141 3.70487 24.8556 4.73165 24.2746 5.33377ZM12.3374 1.5872C11.1225 1.16466 7.99257 0.717209 6.3478 2.41116C5.98397 2.78587 5.55554 3.48864 5.55554 3.48864C5.55554 3.48864 4.82665 4.81961 4.25622 4.24919C3.68579 3.67878 5.0168 1.96749 6.06259 1.46044C7.10838 0.953388 9.70703 0.0660505 12.3374 1.5872Z"
            fill="currentColor" />
          <path
            d="M10.078 13.5002H3.10601C2.2309 13.5002 1.52148 14.2097 1.52148 15.0848V18.3172C1.52148 19.1923 2.2309 19.9018 3.10601 19.9018H10.078C10.9531 19.9018 11.6625 19.1923 11.6625 18.3172V15.0848C11.6625 14.2097 10.9531 13.5002 10.078 13.5002Z"
            stroke="currentColor" stroke-width="1.26763" />
          <path
            d="M0.823513 14.6094H0.379847C0.187322 14.6094 0.03125 14.7654 0.03125 14.958V15.9721C0.03125 16.1646 0.187322 16.3207 0.379847 16.3207H0.823513C1.01604 16.3207 1.17211 16.1646 1.17211 15.9721V14.958C1.17211 14.7654 1.01604 14.6094 0.823513 14.6094Z"
            fill="currentColor" stroke="currentColor" stroke-width="0.0633813" />
          <path
            d="M16.7326 13.5002H23.7045C24.5796 13.5002 25.2891 14.2097 25.2891 15.0848V18.3172C25.2891 19.1923 24.5796 19.9018 23.7045 19.9018H16.7326C15.8575 19.9018 15.1481 19.1923 15.1481 18.3172V15.0848C15.1481 14.2097 15.8575 13.5002 16.7326 13.5002Z"
            stroke="currentColor" stroke-width="1.26763" />
          <path
            d="M25.9861 14.6094H26.4297C26.6222 14.6094 26.7783 14.7654 26.7783 14.958V15.9721C26.7783 16.1646 26.6222 16.3207 26.4297 16.3207H25.9861C25.7935 16.3207 25.6375 16.1646 25.6375 15.9721V14.958C25.6375 14.7654 25.7935 14.6094 25.9861 14.6094Z"
            fill="currentColor" stroke="currentColor" stroke-width="0.0633813" />
          <path
            d="M12.2954 15.5601H14.5137C14.7062 15.5601 14.8623 15.7161 14.8623 15.9087V16.9228C14.8623 17.1153 14.7062 17.2713 14.5137 17.2713H12.2954C12.1028 17.2713 11.9468 17.1153 11.9468 16.9228V15.9087C11.9468 15.7161 12.1028 15.5601 12.2954 15.5601Z"
            fill="currentColor" stroke="currentColor" stroke-width="0.0633813" />
          <path
            d="M9.93343 16.3937C9.93343 16.7087 9.76317 16.9641 9.55314 16.9641C9.34311 16.9641 9.17285 16.7087 9.17285 16.3937C9.17285 16.0786 9.34311 15.8232 9.55314 15.8232C9.76317 15.8232 9.93343 16.0786 9.93343 16.3937Z"
            fill="currentColor" />
          <path
            d="M16.9688 16.3937C16.9688 16.7087 17.139 16.9641 17.3491 16.9641C17.5591 16.9641 17.7293 16.7087 17.7293 16.3937C17.7293 16.0786 17.5591 15.8232 17.3491 15.8232C17.139 15.8232 16.9688 16.0786 16.9688 16.3937Z"
            fill="currentColor" />
          <path
            d="M14.2758 20.1016C13.642 20.6086 12.7863 20.3551 12.5645 20.1016C12.6278 20.4185 12.8687 20.8622 13.4518 20.8622C14.0349 20.8622 14.2441 20.3551 14.2758 20.1016Z"
            fill="currentColor" />
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M12.1312 22.411C12.1575 22.2914 12.2759 22.2157 12.3956 22.2421L14.6347 22.735C14.7544 22.7614 14.83 22.8797 14.8036 22.9994C14.7773 23.119 14.659 23.1947 14.5393 23.1683L12.3002 22.6753C12.1805 22.649 12.1049 22.5307 12.1312 22.411Z"
            fill="currentColor" />
          <path
            d="M13.4203 27.6754C9.00897 27.7261 5.77228 23.6613 4.70536 21.6225C4.54691 21.3197 4.42016 21.2739 4.32509 21.3373C4.17297 21.4387 4.28282 21.6437 4.32507 21.7493C4.85747 22.9916 5.58213 24.0416 5.87791 24.4113C4.83846 26.1353 4.49409 27.855 4.45183 28.4994C6.1758 26.8008 7.91668 26.8832 8.57162 27.1367C13.7055 29.7987 16.5577 27.929 18.1739 27.1367C19.4669 26.5029 21.4803 27.7388 22.3254 28.436C22.224 26.8642 21.3747 25.1402 20.9627 24.4747C21.6282 23.5873 22.1669 22.5099 22.4522 21.9711C22.6803 21.5401 22.6106 21.369 22.5472 21.3373C22.3951 21.2613 22.2092 21.4958 22.1353 21.6225C21.6599 22.4148 18.9345 27.6121 13.4203 27.6754Z"
            fill="currentColor" />
        </svg>
      </a>
      <a class="navbar-brand p-0 me-0 position-absolute top-50 start-50 translate-middle d-lg-none" href="/"
        aria-label="jinydev">
        <svg width="100" height="26" viewBox="0 0 112 29" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M24.2746 5.33377C25.8486 7.33981 25.1183 11.1792 24.3961 13.0177C24.4028 13.0199 24.4094 13.0221 24.4161 13.0243L24.4013 13.0248L22.649 12.9082C22.649 12.9053 22.6488 12.9013 22.649 12.8993C22.9902 8.93373 22.5975 7.34575 22.2147 7.07677C17.6316 10.3896 13.5379 9.33658 12.2725 9.01111C11.928 8.9225 11.7932 8.88781 11.9152 9.00988C12.2872 9.38185 13.1336 9.82821 13.7371 10.1465H13.7372L13.7376 10.1467C13.8743 10.2188 13.9985 10.2843 14.1019 10.3409C9.12673 10.3984 7.12659 8.00279 6.53855 7.29846C6.47859 7.22664 6.4333 7.1724 6.40105 7.14015C6.11408 6.85318 4.49961 5.87252 3.99256 7.74227C3.50142 9.55335 3.81246 11.6775 3.97665 12.7988C3.99089 12.896 3.99257 12.8981 3.99257 12.9298L2.37635 13.0248L2.37213 13.0247C0.223493 8.05534 1.83854 5.26971 3.29536 4.2246C3.29536 1.78444 6.27428 -0.592359 10.0455 0.263262C14.8768 1.64043 16.3468 1.18409 18.0759 0.647278C18.774 0.430562 19.5143 0.200726 20.5351 0.073124C25.2219 -0.512739 26.7993 2.56612 27 4.16122C26.2141 3.70487 24.8556 4.73165 24.2746 5.33377ZM12.3374 1.5872C11.1225 1.16466 7.99257 0.717209 6.3478 2.41116C5.98397 2.78587 5.55554 3.48864 5.55554 3.48864C5.55554 3.48864 4.82665 4.81961 4.25622 4.24919C3.68579 3.67878 5.0168 1.96749 6.06259 1.46044C7.10838 0.953388 9.70703 0.0660505 12.3374 1.5872Z"
            fill="currentColor" />
          <path
            d="M10.078 13.5002H3.10601C2.2309 13.5002 1.52148 14.2097 1.52148 15.0848V18.3172C1.52148 19.1923 2.2309 19.9018 3.10601 19.9018H10.078C10.9531 19.9018 11.6625 19.1923 11.6625 18.3172V15.0848C11.6625 14.2097 10.9531 13.5002 10.078 13.5002Z"
            stroke="currentColor" stroke-width="1.26763" />
          <path
            d="M0.823513 14.6094H0.379847C0.187322 14.6094 0.03125 14.7654 0.03125 14.958V15.9721C0.03125 16.1646 0.187322 16.3207 0.379847 16.3207H0.823513C1.01604 16.3207 1.17211 16.1646 1.17211 15.9721V14.958C1.17211 14.7654 1.01604 14.6094 0.823513 14.6094Z"
            fill="currentColor" stroke="currentColor" stroke-width="0.0633813" />
          <path
            d="M16.7326 13.5002H23.7045C24.5796 13.5002 25.2891 14.2097 25.2891 15.0848V18.3172C25.2891 19.1923 24.5796 19.9018 23.7045 19.9018H16.7326C15.8575 19.9018 15.1481 19.1923 15.1481 18.3172V15.0848C15.1481 14.2097 15.8575 13.5002 16.7326 13.5002Z"
            stroke="currentColor" stroke-width="1.26763" />
          <path
            d="M25.9861 14.6094H26.4297C26.6222 14.6094 26.7783 14.7654 26.7783 14.958V15.9721C26.7783 16.1646 26.6222 16.3207 26.4297 16.3207H25.9861C25.7935 16.3207 25.6375 16.1646 25.6375 15.9721V14.958C25.6375 14.7654 25.7935 14.6094 25.9861 14.6094Z"
            fill="currentColor" stroke="currentColor" stroke-width="0.0633813" />
          <path
            d="M12.2954 15.5601H14.5137C14.7062 15.5601 14.8623 15.7161 14.8623 15.9087V16.9228C14.8623 17.1153 14.7062 17.2713 14.5137 17.2713H12.2954C12.1028 17.2713 11.9468 17.1153 11.9468 16.9228V15.9087C11.9468 15.7161 12.1028 15.5601 12.2954 15.5601Z"
            fill="currentColor" stroke="currentColor" stroke-width="0.0633813" />
          <path
            d="M9.93343 16.3937C9.93343 16.7087 9.76317 16.9641 9.55314 16.9641C9.34311 16.9641 9.17285 16.7087 9.17285 16.3937C9.17285 16.0786 9.34311 15.8232 9.55314 15.8232C9.76317 15.8232 9.93343 16.0786 9.93343 16.3937Z"
            fill="currentColor" />
          <path
            d="M16.9688 16.3937C16.9688 16.7087 17.139 16.9641 17.3491 16.9641C17.5591 16.9641 17.7293 16.7087 17.7293 16.3937C17.7293 16.0786 17.5591 15.8232 17.3491 15.8232C17.139 15.8232 16.9688 16.0786 16.9688 16.3937Z"
            fill="currentColor" />
          <path
            d="M14.2758 20.1016C13.642 20.6086 12.7863 20.3551 12.5645 20.1016C12.6278 20.4185 12.8687 20.8622 13.4518 20.8622C14.0349 20.8622 14.2441 20.3551 14.2758 20.1016Z"
            fill="currentColor" />
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M12.1312 22.411C12.1575 22.2914 12.2759 22.2157 12.3956 22.2421L14.6347 22.735C14.7544 22.7614 14.83 22.8797 14.8036 22.9994C14.7773 23.119 14.659 23.1947 14.5393 23.1683L12.3002 22.6753C12.1805 22.649 12.1049 22.5307 12.1312 22.411Z"
            fill="currentColor" />
          <path
            d="M13.4203 27.6754C9.00897 27.7261 5.77228 23.6613 4.70536 21.6225C4.54691 21.3197 4.42016 21.2739 4.32509 21.3373C4.17297 21.4387 4.28282 21.6437 4.32507 21.7493C4.85747 22.9916 5.58213 24.0416 5.87791 24.4113C4.83846 26.1353 4.49409 27.855 4.45183 28.4994C6.1758 26.8008 7.91668 26.8832 8.57162 27.1367C13.7055 29.7987 16.5577 27.929 18.1739 27.1367C19.4669 26.5029 21.4803 27.7388 22.3254 28.436C22.224 26.8642 21.3747 25.1402 20.9627 24.4747C21.6282 23.5873 22.1669 22.5099 22.4522 21.9711C22.6803 21.5401 22.6106 21.369 22.5472 21.3373C22.3951 21.2613 22.2092 21.4958 22.1353 21.6225C21.6599 22.4148 18.9345 27.6121 13.4203 27.6754Z"
            fill="currentColor" />
          <text x="32" y="21" font-family="Arial, sans-serif" font-weight="bold" font-size="22"
            fill="currentColor">Jiny</text>
        </svg>
      </a>

      <!-- Mobile: Right Toggle (Menu) -->
      <div class="d-flex d-lg-none ms-auto">
        <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#bdNavbar"
          aria-controls="bdNavbar" aria-label="Toggle navigation">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grid"
            viewBox="0 0 16 16">
            <path
              d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z" />
          </svg>
        </button>
      </div>

      <!-- OffCanvas -->
      <div class="offcanvas-lg offcanvas-end flex-grow-1" tabindex="-1" id="bdNavbar"
        aria-labelledby="bdNavbarOffcanvasLabel" data-bs-scroll="true">
        <!-- OffCanver Header -->
        <div class="offcanvas-header px-4 pb-0">
          <h5 class="offcanvas-title text-white" id="bdNavbarOffcanvasLabel">Jiny</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"
            data-bs-target="#bdNavbar">
          </button>
        </div>

        <!-- OffCanver Body -->
        <div class="offcanvas-body p-4 pt-0 p-lg-0">
          <hr class="d-lg-none text-white-50">

          <ul class="navbar-nav flex-column flex-lg-row bd-navbar-nav">
            
            <li class="nav-item">
              <a class="nav-link py-2 px-0 px-lg-2" href="/part01/">자바 기초</a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link py-2 px-0 px-lg-2" href="/part02/">객체지향</a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link py-2 px-0 px-lg-2" href="/part03/">라이브러리</a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link py-2 px-0 px-lg-2" href="/part04/">데이터 I/O</a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link py-2 px-0 px-lg-2" href="/part05/">최신 자바</a>
            </li>
            
          </ul>

          <hr class="d-lg-none text-white-50">

          <ul class="navbar-nav flex-row flex-wrap ms-md-auto">
            <li class="nav-item col-6 col-lg-auto">
              <a class="nav-link py-2 px-0 px-lg-2" href="https://github.com/jinydev/datas" target="_blank"
                rel="noopener">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="navbar-nav-svg"
                  viewBox="0 0 512 499.36" role="img">
                  <title>GitHub</title>
                  <path fill="currentColor" fill-rule="evenodd"
                    d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z">
                  </path>
                </svg>
                <small class="d-lg-none ms-2">GitHub</small>
              </a>
            </li>

            <li class="nav-item py-2 py-lg-1 col-12 col-lg-auto">
              <div class="vr d-none d-lg-flex h-100 mx-lg-2 text-white"></div>
              <hr class="d-lg-none my-2 text-white-50">
            </li>

            <li class="nav-item col-6 col-lg-auto">
              <a class="nav-link py-2 px-0 px-lg-2" href="https://jiny.dev" aria-label="Home">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="navbar-nav-svg"
                  viewBox="0 0 16 16" role="img">
                  <title>Home</title>
                  <path fill="currentColor"
                    d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z" />
                </svg>
                <small class="d-lg-none ms-2">Home</small>
              </a>
            </li>
          </ul>

        </div>
      </div>
    </nav>
  </header>

  <div class="container bd-gutter mt-3 my-md-4 bd-layout">
    <aside class="bd-sidebar scrollBar">
        <div class="offcanvas-lg offcanvas-start" tabindex="-1" id="bdSidebar"
            aria-labelledby="bdSidebarOffcanvasLabel">
            <div class="offcanvas-header border-bottom">
                <h5 class="offcanvas-title" id="bdSidebarOffcanvasLabel">학습목차</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"
                    data-bs-target="#bdSidebar"></button>
            </div>

            <div class="offcanvas-body">
                <!-- 네비게이션 -->
                <nav class="bd-links w-100" id="bd-docs-nav" aria-label="Docs navigation">
  <ul class="bd-links-nav list-unstyled mb-0 pb-3 pb-md-2 pe-lg-2">
    <li class="bd-links-group py-2">
      <strong class="bd-links-heading d-flex w-100 align-items-center fw-semibold">
        강의 목차
      </strong>
      <ul class="list-unstyled fw-normal pb-2 small">
        
        

        
        <li>
          
          
          
          <button
            class="bd-links-link bd-links-btn btn d-inline-flex align-items-center rounded border-0 collapsed w-100"
            data-bs-toggle="collapse" data-bs-target="#collapse-1"
            aria-expanded="false">
            12. java.base 모듈
            <svg class="bi ms-auto" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
            </svg>
          </button>
          <div class="collapse " id="collapse-1">
            <ul class="list-unstyled fw-normal pb-1 small ms-3">
              
              <li>
                <a href="/part03/12/"
                  class="bd-links-link d-inline-block rounded ">
                  12. java.base 모듈
                </a>
              </li>
              
              <li>
                <a href="/part03/12/#121-API-도큐먼트"
                  class="bd-links-link d-inline-block rounded ">
                  12.1 API 도큐먼트
                </a>
              </li>
              
              <li>
                <a href="/part03/12/#122-javabase-모듈"
                  class="bd-links-link d-inline-block rounded ">
                  12.2 java.base 모듈
                </a>
              </li>
              
              <li>
                <a href="/part03/12/#123-Object-클래스"
                  class="bd-links-link d-inline-block rounded ">
                  12.3 Object 클래스
                </a>
              </li>
              
              <li>
                <a href="/part03/12/#124-System-클래스"
                  class="bd-links-link d-inline-block rounded ">
                  12.4 System 클래스
                </a>
              </li>
              
              <li>
                <a href="/part03/12/#125-문자열-클래스"
                  class="bd-links-link d-inline-block rounded ">
                  12.5 문자열 클래스
                </a>
              </li>
              
              <li>
                <a href="/part03/12/#126-포장-클래스"
                  class="bd-links-link d-inline-block rounded ">
                  12.6 포장 클래스
                </a>
              </li>
              
              <li>
                <a href="/part03/12/#127-수학-클래스"
                  class="bd-links-link d-inline-block rounded ">
                  12.7 수학 클래스
                </a>
              </li>
              
              <li>
                <a href="/part03/12/#128-날짜와-시간-클래스"
                  class="bd-links-link d-inline-block rounded ">
                  12.8 날짜와 시간 클래스
                </a>
              </li>
              
              <li>
                <a href="/part03/12/#129-형식-클래스"
                  class="bd-links-link d-inline-block rounded ">
                  12.9 형식 클래스
                </a>
              </li>
              
              <li>
                <a href="/part03/12/#1210-정규-표현식-클래스"
                  class="bd-links-link d-inline-block rounded ">
                  12.10 정규 표현식 클래스
                </a>
              </li>
              
              <li>
                <a href="/part03/12/#1211-리플렉션"
                  class="bd-links-link d-inline-block rounded ">
                  12.11 리플렉션
                </a>
              </li>
              
              <li>
                <a href="/part03/12/#1212-어노테이션"
                  class="bd-links-link d-inline-block rounded ">
                  12.12 어노테이션
                </a>
              </li>
              
            </ul>
          </div>
          
        </li>
        
        <li>
          
          
          
          <button
            class="bd-links-link bd-links-btn btn d-inline-flex align-items-center rounded border-0 collapsed w-100"
            data-bs-toggle="collapse" data-bs-target="#collapse-2"
            aria-expanded="false">
            13. 제네릭
            <svg class="bi ms-auto" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
            </svg>
          </button>
          <div class="collapse " id="collapse-2">
            <ul class="list-unstyled fw-normal pb-1 small ms-3">
              
              <li>
                <a href="/part03/13/"
                  class="bd-links-link d-inline-block rounded ">
                  13. 제네릭
                </a>
              </li>
              
              <li>
                <a href="/part03/13/#131-제네릭이란"
                  class="bd-links-link d-inline-block rounded ">
                  13.1 제네릭이란?
                </a>
              </li>
              
              <li>
                <a href="/part03/13/#132-제네릭-타입"
                  class="bd-links-link d-inline-block rounded ">
                  13.2 제네릭 타입
                </a>
              </li>
              
              <li>
                <a href="/part03/13/#133-제네릭-메소드"
                  class="bd-links-link d-inline-block rounded ">
                  13.3 제네릭 메소드
                </a>
              </li>
              
              <li>
                <a href="/part03/13/#134-제한된-타입-파라미터"
                  class="bd-links-link d-inline-block rounded ">
                  13.4 제한된 타입 파라미터
                </a>
              </li>
              
              <li>
                <a href="/part03/13/#135-와일드카드-타입-파라미터"
                  class="bd-links-link d-inline-block rounded ">
                  13.5 와일드카드 타입 파라미터
                </a>
              </li>
              
            </ul>
          </div>
          
        </li>
        
        <li>
          
          
          
          <button
            class="bd-links-link bd-links-btn btn d-inline-flex align-items-center rounded border-0  w-100"
            data-bs-toggle="collapse" data-bs-target="#collapse-3"
            aria-expanded="true">
            14. 멀티 스레드
            <svg class="bi ms-auto" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
            </svg>
          </button>
          <div class="collapse show" id="collapse-3">
            <ul class="list-unstyled fw-normal pb-1 small ms-3">
              
              <li>
                <a href="/part03/14/"
                  class="bd-links-link d-inline-block rounded active">
                  14. 멀티 스레드
                </a>
              </li>
              
              <li>
                <a href="/part03/14/#141-멀티-스레드-개념"
                  class="bd-links-link d-inline-block rounded ">
                  14.1 멀티 스레드 개념
                </a>
              </li>
              
              <li>
                <a href="/part03/14/#142-메인-스레드"
                  class="bd-links-link d-inline-block rounded ">
                  14.2 메인 스레드
                </a>
              </li>
              
              <li>
                <a href="/part03/14/#143-작업-스레드-생성과-실행"
                  class="bd-links-link d-inline-block rounded ">
                  14.3 작업 스레드 생성과 실행
                </a>
              </li>
              
              <li>
                <a href="/part03/14/#144-스레드-이름"
                  class="bd-links-link d-inline-block rounded ">
                  14.4 스레드 이름
                </a>
              </li>
              
              <li>
                <a href="/part03/14/#145-스레드-상태"
                  class="bd-links-link d-inline-block rounded ">
                  14.5 스레드 상태
                </a>
              </li>
              
              <li>
                <a href="/part03/14/#146-스레드-동기화"
                  class="bd-links-link d-inline-block rounded ">
                  14.6 스레드 동기화
                </a>
              </li>
              
              <li>
                <a href="/part03/14/#147-스레드-안전-종료"
                  class="bd-links-link d-inline-block rounded ">
                  14.7 스레드 안전 종료
                </a>
              </li>
              
              <li>
                <a href="/part03/14/#148-데몬-스레드"
                  class="bd-links-link d-inline-block rounded ">
                  14.8 데몬 스레드
                </a>
              </li>
              
              <li>
                <a href="/part03/14/#149-스레드풀"
                  class="bd-links-link d-inline-block rounded ">
                  14.9 스레드풀
                </a>
              </li>
              
            </ul>
          </div>
          
        </li>
        
        <li>
          
          
          
          <button
            class="bd-links-link bd-links-btn btn d-inline-flex align-items-center rounded border-0 collapsed w-100"
            data-bs-toggle="collapse" data-bs-target="#collapse-4"
            aria-expanded="false">
            15. 컬렉션 자료구조
            <svg class="bi ms-auto" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
            </svg>
          </button>
          <div class="collapse " id="collapse-4">
            <ul class="list-unstyled fw-normal pb-1 small ms-3">
              
              <li>
                <a href="/part03/15/"
                  class="bd-links-link d-inline-block rounded ">
                  15. 컬렉션 자료구조
                </a>
              </li>
              
              <li>
                <a href="/part03/15/#151-컬렉션-프레임워크"
                  class="bd-links-link d-inline-block rounded ">
                  15.1 컬렉션 프레임워크
                </a>
              </li>
              
              <li>
                <a href="/part03/15/#152-List-컬렉션"
                  class="bd-links-link d-inline-block rounded ">
                  15.2 List 컬렉션
                </a>
              </li>
              
              <li>
                <a href="/part03/15/#153-Set-컬렉션"
                  class="bd-links-link d-inline-block rounded ">
                  15.3 Set 컬렉션
                </a>
              </li>
              
              <li>
                <a href="/part03/15/#154-Map-컬렉션"
                  class="bd-links-link d-inline-block rounded ">
                  15.4 Map 컬렉션
                </a>
              </li>
              
              <li>
                <a href="/part03/15/#155-검색-기능을-강화시킨-컬렉션"
                  class="bd-links-link d-inline-block rounded ">
                  15.5 검색 기능을 강화시킨 컬렉션
                </a>
              </li>
              
              <li>
                <a href="/part03/15/#156-LIFO와-FIFO-컬렉션"
                  class="bd-links-link d-inline-block rounded ">
                  15.6 LIFO와 FIFO 컬렉션
                </a>
              </li>
              
              <li>
                <a href="/part03/15/#157-동기화된-컬렉션"
                  class="bd-links-link d-inline-block rounded ">
                  15.7 동기화된 컬렉션
                </a>
              </li>
              
              <li>
                <a href="/part03/15/#158-수정할-수-없는-컬렉션"
                  class="bd-links-link d-inline-block rounded ">
                  15.8 수정할 수 없는 컬렉션
                </a>
              </li>
              
            </ul>
          </div>
          
        </li>
        
        <li>
          
          
          
          <button
            class="bd-links-link bd-links-btn btn d-inline-flex align-items-center rounded border-0 collapsed w-100"
            data-bs-toggle="collapse" data-bs-target="#collapse-5"
            aria-expanded="false">
            16. 람다식
            <svg class="bi ms-auto" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
            </svg>
          </button>
          <div class="collapse " id="collapse-5">
            <ul class="list-unstyled fw-normal pb-1 small ms-3">
              
              <li>
                <a href="/part03/16/"
                  class="bd-links-link d-inline-block rounded ">
                  16. 람다식
                </a>
              </li>
              
              <li>
                <a href="/part03/16/#161-람다식이란"
                  class="bd-links-link d-inline-block rounded ">
                  16.1 람다식이란?
                </a>
              </li>
              
              <li>
                <a href="/part03/16/#162-매개변수가-없는-람다식"
                  class="bd-links-link d-inline-block rounded ">
                  16.2 매개변수가 없는 람다식
                </a>
              </li>
              
              <li>
                <a href="/part03/16/#163-매개변수가-있는-람다식"
                  class="bd-links-link d-inline-block rounded ">
                  16.3 매개변수가 있는 람다식
                </a>
              </li>
              
              <li>
                <a href="/part03/16/#164-리턴값이-있는-람다식"
                  class="bd-links-link d-inline-block rounded ">
                  16.4 리턴값이 있는 람다식
                </a>
              </li>
              
              <li>
                <a href="/part03/16/#165-메소드-참조"
                  class="bd-links-link d-inline-block rounded ">
                  16.5 메소드 참조
                </a>
              </li>
              
              <li>
                <a href="/part03/16/#166-생성자-참조"
                  class="bd-links-link d-inline-block rounded ">
                  16.6 생성자 참조
                </a>
              </li>
              
            </ul>
          </div>
          
        </li>
        
        <li>
          
          
          
          <button
            class="bd-links-link bd-links-btn btn d-inline-flex align-items-center rounded border-0 collapsed w-100"
            data-bs-toggle="collapse" data-bs-target="#collapse-6"
            aria-expanded="false">
            17. 스트림 요소 처리
            <svg class="bi ms-auto" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
            </svg>
          </button>
          <div class="collapse " id="collapse-6">
            <ul class="list-unstyled fw-normal pb-1 small ms-3">
              
              <li>
                <a href="/part03/17/"
                  class="bd-links-link d-inline-block rounded ">
                  17. 스트림 요소 처리
                </a>
              </li>
              
              <li>
                <a href="/part03/17/#171-스트림이란"
                  class="bd-links-link d-inline-block rounded ">
                  17.1 스트림이란?
                </a>
              </li>
              
              <li>
                <a href="/part03/17/#172-내부-반복자"
                  class="bd-links-link d-inline-block rounded ">
                  17.2 내부 반복자
                </a>
              </li>
              
              <li>
                <a href="/part03/17/#173-중간-처리와-최종-처리"
                  class="bd-links-link d-inline-block rounded ">
                  17.3 중간 처리와 최종 처리
                </a>
              </li>
              
              <li>
                <a href="/part03/17/#174-리소스로부터-스트림-얻기"
                  class="bd-links-link d-inline-block rounded ">
                  17.4 리소스로부터 스트림 얻기
                </a>
              </li>
              
              <li>
                <a href="/part03/17/#175-요소-걸러내기필터링"
                  class="bd-links-link d-inline-block rounded ">
                  17.5 요소 걸러내기(필터링)
                </a>
              </li>
              
              <li>
                <a href="/part03/17/#176-요소-변환매핑"
                  class="bd-links-link d-inline-block rounded ">
                  17.6 요소 변환(매핑)
                </a>
              </li>
              
              <li>
                <a href="/part03/17/#177-요소-정렬"
                  class="bd-links-link d-inline-block rounded ">
                  17.7 요소 정렬
                </a>
              </li>
              
              <li>
                <a href="/part03/17/#178-요소를-하나씩-처리루핑"
                  class="bd-links-link d-inline-block rounded ">
                  17.8 요소를 하나씩 처리(루핑)
                </a>
              </li>
              
              <li>
                <a href="/part03/17/#179-요소-조건-만족-여부매칭"
                  class="bd-links-link d-inline-block rounded ">
                  17.9 요소 조건 만족 여부(매칭)
                </a>
              </li>
              
              <li>
                <a href="/part03/17/#1710-요소-기본-집계"
                  class="bd-links-link d-inline-block rounded ">
                  17.10 요소 기본 집계
                </a>
              </li>
              
              <li>
                <a href="/part03/17/#1711-요소-커스텀-집계"
                  class="bd-links-link d-inline-block rounded ">
                  17.11 요소 커스텀 집계
                </a>
              </li>
              
              <li>
                <a href="/part03/17/#1712-요소-수집"
                  class="bd-links-link d-inline-block rounded ">
                  17.12 요소 수집
                </a>
              </li>
              
              <li>
                <a href="/part03/17/#1713-요소-병렬-처리"
                  class="bd-links-link d-inline-block rounded ">
                  17.13 요소 병렬 처리
                </a>
              </li>
              
            </ul>
          </div>
          
        </li>
        
      </ul>
    </li>
  </ul>
</nav>
            </div>
        </div>
    </aside>

    <main class="bd-main order-1">
        <nav aria-label="breadcrumb" class="mt-3">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        
        
        
        
        
        
        
        
        
        <li class="breadcrumb-item"><a href="/part03/">Part03</a></li>
        
        
        
        
        
        
        <li class="breadcrumb-item active" aria-current="page">Chapter 14. 멀티 스레드</li>
        
        
        
    </ol>
</nav>
        <div class="bd-content ps-lg-2">
            <h1 id="chapter-14-멀티-스레드">Chapter 14. 멀티 스레드</h1>

<h2 id="141-멀티-스레드-개념">14.1 멀티 스레드 개념</h2>

<p>운영체제는 실행 중인 프로그램을 <strong>프로세스(process)</strong>로 관리한다. 멀티 태스킹(multi tasking)은 두 가지 이상의 작업을 동시에 처리하는 것을 말하는데, 이때 운영체제는 멀티 프로세스를 생성해서 처리한다. 하지만 멀티 태스킹이 꼭 멀티 프로세스를 뜻하지는 않는다.</p>

<p>하나의 프로세스 내에서 멀티 태스킹을 할 수 있도록 만들어진 프로그램들도 있다. 예를 들어 메신저는 채팅 작업을 하면서 동시에 파일 전송 작업을 수행하기도 한다.</p>

<p>하나의 프로세스가 두 가지 이상의 작업을 처리할 수 있는 이유는 <strong>멀티 스레드(multi thread)</strong>가 있기 때문이다. <strong>스레드(thread)</strong>는 코드의 실행 흐름을 말하는데, 프로세스 내에 스레드가 두 개라면 두 개의 코드 실행 흐름이 생긴다는 의미이다.</p>

<p>멀티 프로세스가 프로그램 단위의 멀티 태스킹이라면 멀티 스레드는 프로그램 내부에서의 멀티 태스킹이라고 볼 수 있다.</p>

<p>멀티 프로세스들은 서로 독립적이므로 하나의 프로세스에서 오류가 발생해도 다른 프로세스에게 영향을 미치지 않는다. 하지만 멀티 스레드는 프로세스 내부에서 생성되기 때문에 하나의 스레드가 예외를 발생시키면 프로세스가 종료되므로 다른 스레드에게 영향을 미친다.</p>

<p>예를 들어 워드와 엑셀을 동시에 사용하는 도중에 워드에 오류가 생겨 먹통이 되더라도 엑셀은 여전히 사용 가능하다. 그러나 멀티 스레드로 동작하는 메신저의 경우, 파일을 전송하는 스레드에서 예외가 발생하면 메신저 프로세스 자체가 종료되기 때문에 채팅 스레드도 같이 종료된다. 그렇기 때문에 멀티 스레드를 사용할 경우에는 예외 처리에 만전을 기해야 한다.</p>

<p>멀티 스레드는 데이터를 분할해서 병렬로 처리하는 곳에서 사용하기도 하고, 안드로이드 앱에서 네트워크 통신을 하기 위해 사용하기도 한다. 또한 다수의 클라이언트 요청을 처리하는 서버를 개발할 때에도 사용된다.</p>

<blockquote>
  <p>자바 21부터는 가상 스레드(virtual thread) 기능이 추가되었다. 이번 장에서 설명하는 스레드는 운영체제 스레드와 1:1로 매핑되는 플랫폼 스레드(platform thread)일 때 복수 개의 가상 스레드가 운영체제의 스레드 1개와 매핑되면서 실행된다.</p>
</blockquote>

<h2 id="142-메인-스레드">14.2 메인 스레드</h2>

<p>모든 자바 프로그램은 <strong>메인 스레드(main thread)</strong>가 main() 메소드를 실행하면서 시작된다. 메인 스레드는 main() 메소드의 첫 코드부터 순차적으로 실행하고, main() 메소드의 마지막 코드를 실행하거나 return 문을 만나면 실행을 종료한다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
	<span class="nc">String</span> <span class="n">data</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
	<span class="k">if</span> <span class="o">(...)</span> <span class="o">{</span>
	<span class="o">}</span>
	<span class="k">while</span> <span class="o">(...)</span> <span class="o">{</span>
	<span class="o">}</span>
	<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"......."</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>메인 스레드는 필요에 따라 추가 작업 스레드들을 만들어서 실행시킬 수 있다.</p>

<p>싱글 스레드에서는 메인 스레드가 종료되면 프로세스도 종료된다. 하지만 멀티 스레드에서는 실행 중인 스레드가 하나라도 있다면 프로세스는 종료되지 않는다. 메인 스레드가 작업 스레드보다 먼저 종료되더라도 작업 스레드가 계속 실행 중이라면 프로세스는 종료되지 않는다.</p>

<h2 id="143-작업-스레드-생성과-실행">14.3 작업 스레드 생성과 실행</h2>

<p>멀티 스레드로 실행하는 프로그램을 개발하려면 먼저 몇 개의 작업을 병렬로 실행할지 결정하고 각 작업별로 스레드를 생성해야 한다.</p>

<p>자바 프로그램은 메인 스레드가 반드시 존재하기 때문에 메인 작업 이외에 추가적인 작업 수만큼 스레드를 생성하면 된다. 자바는 작업 스레드도 객체로 관리하므로 클래스가 필요하다. Thread 클래스로 직접 객체를 생성해도 되지만, 하위 클래스를 만들어서 생성할 수도 있다.</p>

<h3 id="thread-클래스로-직접-생성">Thread 클래스로 직접 생성</h3>

<p>java.lang 패키지에 있는 Thread 클래스로부터 작업 스레드 객체를 직접 생성하려면 다음과 같이 Runnable 구현 객체를 매개값으로 갖는 생성자를 호출하면 된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="nc">Runnable</span> <span class="n">target</span><span class="o">);</span>
</code></pre></div></div>

<p>Runnable은 스레드가 작업을 실행할 때 사용하는 인터페이스이다. Runnable에는 run() 메소드가 정의되어 있는데, 구현 클래스는 run()을 재정의해서 스레드가 실행할 코드를 가지고 있어야 한다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Task</span> <span class="kd">implements</span> <span class="nc">Runnable</span> <span class="o">{</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">// 스레드가 실행할 코드</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Runnable 구현 클래스는 작업 내용을 정의한 것이므로, 스레드에게 전달해야 한다. Runnable 구현 객체를 생성한 후 Thread 생성자 매개값으로 Runnable 객체를 다음과 같이 전달하면 된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Runnable</span> <span class="n">task</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Task</span><span class="o">();</span>
<span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>
</code></pre></div></div>

<p>명시적인 Runnable 구현 클래스를 작성하지 않고 Thread 생성자를 호출할 때 Runnable 익명 구현 객체를 매개값으로 사용할 수 있다. 오히려 이 방법이 더 많이 사용된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">// 스레드가 실행할 코드</span>
	<span class="o">}</span>
<span class="o">});</span>
</code></pre></div></div>

<p>작업 스레드 객체가 생성되었다고 해서 바로 작업 스레드가 실행되지는 않는다. 작업 스레드를 실행하려면 스레드 객체의 start() 메소드를 다음과 같이 호출해야 한다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</code></pre></div></div>

<p>start() 메소드가 호출되면, 작업 스레드는 매개값으로 받은 Runnable의 run() 메소드를 실행하면서 작업을 처리한다.</p>

<p>다음은 메인 스레드가 동시에 두 가지 작업을 처리할 수 없음을 보여주는 예제이다. 원래 목적은 0.5초 주기로 비프(beep)음을 발생시키면서 동시에 프린팅까지 하는 작업이었지만, 메인 스레드는 비프음을 모두 발생한 다음에야 프린팅을 시작한다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec03.exam01</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.awt.Toolkit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BeepPrintExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Toolkit</span> <span class="n">toolkit</span> <span class="o">=</span> <span class="nc">Toolkit</span><span class="o">.</span><span class="na">getDefaultToolkit</span><span class="o">();</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="n">toolkit</span><span class="o">.</span><span class="na">beep</span><span class="o">();</span>
			<span class="k">try</span> <span class="o">{</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		<span class="o">}</span>

		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"띵"</span><span class="o">);</span>
			<span class="k">try</span> <span class="o">{</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>실행 결과</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(비프음 5번 발생 후)
띵
띵
띵
띵
띵
</code></pre></div></div>

<p>원래 목적대로 0.5초 주기로 비프음을 발생시키면서 동시에 프린팅을 하고 싶다면 두 작업 중 하나를 작업 스레드에서 처리하도록 해야 한다. 이제 프린팅은 메인 스레드가 담당하고 비프음을 들려주는 것은 작업 스레드가 담당하도록 수정해 보자.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec03.exam02</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.awt.Toolkit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BeepPrintExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
			<span class="nd">@Override</span>
			<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
				<span class="nc">Toolkit</span> <span class="n">toolkit</span> <span class="o">=</span> <span class="nc">Toolkit</span><span class="o">.</span><span class="na">getDefaultToolkit</span><span class="o">();</span>
				<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
					<span class="n">toolkit</span><span class="o">.</span><span class="na">beep</span><span class="o">();</span>
					<span class="k">try</span> <span class="o">{</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
				<span class="o">}</span>
			<span class="o">}</span>
		<span class="o">});</span>

		<span class="n">thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"띵"</span><span class="o">);</span>
			<span class="k">try</span> <span class="o">{</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>실행 결과</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(비프음과 동시에)
띵
띵
띵
띵
띵
</code></pre></div></div>

<h3 id="thread-자식-클래스로-생성">Thread 자식 클래스로 생성</h3>

<p>작업 스레드 객체를 생성하는 또 다른 방법은 Thread의 자식 객체로 만드는 것이다. Thread 클래스를 상속한 다음 run() 메소드를 재정의해서 스레드가 실행할 코드를 작성하고 객체를 생성하면 된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WorkerThread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">// 스레드가 실행할 코드</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="c1">// 스레드 객체 생성</span>
<span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WorkerThread</span><span class="o">();</span>
</code></pre></div></div>

<p>작업 스레드를 실행하는 방법은 동일하다. start() 메소드를 호출하면 작업 스레드는 재정의된 run()을 실행시킨다.</p>

<p>명시적인 자식 클래스를 정의하지 않고, 다음과 같이 Thread 익명 자식 객체를 사용할 수도 있다. 오히려 이 방법이 더 많이 사용된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">()</span> <span class="o">{</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">// 스레드가 실행할 코드</span>
	<span class="o">}</span>
<span class="o">};</span>
<span class="n">thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</code></pre></div></div>

<p>다음은 Thread의 익명 자식 객체로 작업 스레드를 정의하고 비프음을 실행하도록 이전 예제를 수정한 것이다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec03.exam03</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.awt.Toolkit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BeepPrintExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">()</span> <span class="o">{</span>
			<span class="nd">@Override</span>
			<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
				<span class="nc">Toolkit</span> <span class="n">toolkit</span> <span class="o">=</span> <span class="nc">Toolkit</span><span class="o">.</span><span class="na">getDefaultToolkit</span><span class="o">();</span>
				<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
					<span class="n">toolkit</span><span class="o">.</span><span class="na">beep</span><span class="o">();</span>
					<span class="k">try</span> <span class="o">{</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
				<span class="o">}</span>
			<span class="o">}</span>
		<span class="o">};</span>

		<span class="n">thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"띵"</span><span class="o">);</span>
			<span class="k">try</span> <span class="o">{</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="144-스레드-이름">14.4 스레드 이름</h2>

<p>스레드는 자신의 이름을 가지고 있다. 메인 스레드는 ‘main’이라는 이름을 가지고 있고, 작업 스레드는 자동적으로 ‘Thread-n’이라는 이름을 가진다. 작업 스레드의 이름을 Thread-n 대신 다른 이름으로 설정하고 싶다면 Thread 클래스의 setName() 메소드를 사용하면 된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">thread</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"스레드 이름"</span><span class="o">);</span>
</code></pre></div></div>

<p>스레드 이름은 디버깅할 때 어떤 스레드가 작업을 하는지 조사할 목적으로 주로 사용된다. 현재 코드를 어떤 스레드가 실행하고 있는지 확인하려면 정적 메소드인 currentThread()로 스레드 객체의 참조를 얻은 다음 getName() 메소드로 이름을 출력해보면 된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">();</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">thread</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
</code></pre></div></div>

<p>다음은 현재 실행 중인 스레드의 참조를 얻어 이름을 콘솔에 출력하고, 작업 스레드의 이름을 setName() 메소드로 수정하는 방법을 보여 준다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec04</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadNameExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Thread</span> <span class="n">mainThread</span> <span class="o">=</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">mainThread</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" 실행"</span><span class="o">);</span>

		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="nc">Thread</span> <span class="n">threadA</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">()</span> <span class="o">{</span>
				<span class="nd">@Override</span>
				<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
					<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" 실행"</span><span class="o">);</span>
				<span class="o">}</span>
			<span class="o">};</span>
			<span class="n">threadA</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="nc">Thread</span> <span class="n">chatThread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">()</span> <span class="o">{</span>
			<span class="nd">@Override</span>
			<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
				<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" 실행"</span><span class="o">);</span>
			<span class="o">}</span>
		<span class="o">};</span>
		<span class="n">chatThread</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"chat-thread"</span><span class="o">);</span>
		<span class="n">chatThread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>실행 결과</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>main 실행
Thread-0 실행
Thread-1 실행
Thread-2 실행
chat-thread 실행
</code></pre></div></div>

<h2 id="145-스레드-상태">14.5 스레드 상태</h2>

<p>스레드 객체를 생성(NEW)하고, start() 메소드를 호출하면 곧바로 스레드가 실행되는 것이 아니라 실행 대기 상태(RUNNABLE)가 된다. 실행 대기 상태란 실행을 기다리고 있는 상태를 말한다.</p>

<p>실행 대기하는 스레드는 CPU 스케줄링에 따라 CPU를 점유하고 run() 메소드를 실행한다. 이때를 실행(RUNNING) 상태라고 한다. 실행 스레드는 run() 메소드를 모두 실행하기 전에 스케줄링에 의해 다시 실행 대기 상태로 돌아갈 수 있다. 그리고 다른 스레드가 실행 상태가 된다.</p>

<p>이렇게 스레드는 실행 대기 상태와 실행 상태를 번갈아 가면서 자신의 run() 메소드를 조금씩 실행한다. 실행 상태에서 run() 메소드가 종료되면 더 이상 실행할 코드가 없기 때문에 스레드의 실행은 멈추게 된다. 이 상태를 종료 상태(TERMINATED)라고 한다.</p>

<p>실행 상태에서 일시 정지 상태로 가기도 하는데, 일시 정지 상태는 스레드가 실행할 수 없는 상태를 말한다. 스레드가 다시 실행 상태로 가기 위해서는 일시 정지 상태에서 실행 대기 상태로 가야만 한다.</p>

<h3 id="주어진-시간-동안-일시-정지">주어진 시간 동안 일시 정지</h3>

<p>실행 중인 스레드를 일정 시간 멈추게 하고 싶다면 Thread 클래스의 정적 메소드인 sleep()을 이용하면 된다. 매개값에는 얼마 동안 일시 정지 상태로 있을 것인지 밀리세컨드(1/1000) 단위로 시간을 주면 된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span> <span class="o">{</span>
	<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
	<span class="c1">// interrupt() 메소드가 호출되면 실행</span>
<span class="o">}</span>
</code></pre></div></div>

<p>일시 정지 상태에서는 InterruptedException이 발생할 수 있기 때문에 sleep()은 예외 처리가 필요한 메소드이다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec05.exam01</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.awt.Toolkit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SleepExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Toolkit</span> <span class="n">toolkit</span> <span class="o">=</span> <span class="nc">Toolkit</span><span class="o">.</span><span class="na">getDefaultToolkit</span><span class="o">();</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="n">toolkit</span><span class="o">.</span><span class="na">beep</span><span class="o">();</span>
			<span class="k">try</span> <span class="o">{</span>
				<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">3000</span><span class="o">);</span>
			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="다른-스레드의-종료를-기다림">다른 스레드의 종료를 기다림</h3>

<p>스레드는 다른 스레드와 독립적으로 실행하지만 다른 스레드가 종료될 때까지 기다렸다가 실행을 해야 하는 경우도 있다. 예를 들어 계산 스레드의 작업이 종료된 후 그 결과값을 받아 처리하는 경우이다.</p>

<p>이를 위해 스레드는 <strong>join()</strong> 메소드를 제공한다. ThreadA가 ThreadB의 join() 메소드를 호출하면 ThreadA는 ThreadB가 종료할 때까지 일시 정지 상태가 된다. ThreadB의 run() 메소드가 종료되고 나서야 비로소 ThreadA는 일시 정지에서 풀려 다음 코드를 실행한다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">threadB</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
<span class="n">threadB</span><span class="o">.</span><span class="na">join</span><span class="o">();</span> <span class="c1">// ThreadA 일시 정지</span>
</code></pre></div></div>

<p>다음은 SumThread가 계산 작업을 모두 마칠 때까지 메인 스레드가 일시 정지 상태에 있다가 SumThread가 최종 계산된 결과값을 산출하고 종료하면 메인 스레드가 결과값을 받아 출력하는 예제이다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec05.exam02</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SumThread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kt">long</span> <span class="n">sum</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kt">long</span> <span class="nf">getSum</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">sum</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSum</span><span class="o">(</span><span class="kt">long</span> <span class="n">sum</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">sum</span> <span class="o">=</span> <span class="n">sum</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="mi">100</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="n">sum</span> <span class="o">+=</span> <span class="n">i</span><span class="o">;</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec05.exam02</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JoinExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">SumThread</span> <span class="n">sumThread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SumThread</span><span class="o">();</span>
		<span class="n">sumThread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="n">sumThread</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="o">}</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"1~100 합: "</span> <span class="o">+</span> <span class="n">sumThread</span><span class="o">.</span><span class="na">getSum</span><span class="o">());</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>실행 결과</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1~100 합: 5050
</code></pre></div></div>

<h3 id="다른-스레드에게-실행-양보">다른 스레드에게 실행 양보</h3>

<p>스레드가 처리하는 작업은 반복적인 실행을 위해 for 문이나 while 문을 포함하는 경우가 많은데, 가끔 반복문이 무의미한 반복을 하는 경우가 있다.</p>

<p>이때는 다른 스레드에게 실행을 양보하고 자신은 실행 대기 상태로 가는 것이 프로그램 성능에 도움이 된다. 이런 기능을 위해 Thread는 <strong>yield()</strong> 메소드를 제공한다. yield()를 호출한 스레드는 실행 대기 상태로 돌아가고, 다른 스레드가 실행 상태가 된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
	<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">work</span><span class="o">)</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ThreadA 작업 내용"</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
			<span class="nc">Thread</span><span class="o">.</span><span class="na">yield</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec05.exam03</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WorkThread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kt">boolean</span> <span class="n">work</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">WorkThread</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">setName</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">work</span><span class="o">)</span> <span class="o">{</span>
				<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">": 작업처리"</span><span class="o">);</span>
			<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
				<span class="nc">Thread</span><span class="o">.</span><span class="na">yield</span><span class="o">();</span>
			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec05.exam03</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">YieldExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">WorkThread</span> <span class="n">workThreadA</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WorkThread</span><span class="o">(</span><span class="s">"workThreadA"</span><span class="o">);</span>
		<span class="nc">WorkThread</span> <span class="n">workThreadB</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WorkThread</span><span class="o">(</span><span class="s">"workThreadB"</span><span class="o">);</span>
		<span class="n">workThreadA</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
		<span class="n">workThreadB</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

		<span class="k">try</span> <span class="o">{</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		<span class="n">workThreadA</span><span class="o">.</span><span class="na">work</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

		<span class="k">try</span> <span class="o">{</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">10000</span><span class="o">);</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		<span class="n">workThreadA</span><span class="o">.</span><span class="na">work</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>실행 결과</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>workThreadA: 작업처리
workThreadB: 작업처리
(5초 후)
workThreadB: 작업처리
(10초 후)
workThreadA: 작업처리
workThreadB: 작업처리
</code></pre></div></div>

<h2 id="146-스레드-동기화">14.6 스레드 동기화</h2>

<p>멀티 스레드는 하나의 객체를 공유해서 작업할 수도 있다. 이 경우, 다른 스레드에 의해 객체 내부 데이터가 쉽게 변경될 수 있기 때문에 의도했던 것과는 다른 결과가 나올 수 있다.</p>

<p>스레드가 사용 중인 객체를 다른 스레드가 변경할 수 없도록 하려면 스레드 작업이 끝날 때까지 객체에 잠금을 걸면 된다. 이를 위해 자바는 <strong>동기화(synchronized) 메소드와 블록</strong>을 제공한다.</p>

<p>객체 내부에 동기화 메소드와 동기화 블록이 여러 개가 있다면 스레드가 이들 중 하나를 실행할 때 다른 스레드는 해당 메소드는 물론이고 다른 동기화 메소드 및 블록도 실행할 수 없다. 하지만 일반 메소드는 실행이 가능하다.</p>

<h3 id="동기화-메소드-및-블록-선언">동기화 메소드 및 블록 선언</h3>

<p>동기화 메소드를 선언하는 방법은 다음과 같이 synchronized 키워드를 붙이면 된다. synchronized 키워드는 인스턴스와 정적 메소드 어디든 붙일 수 있다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">method</span><span class="o">()</span> <span class="o">{</span>
	<span class="c1">// 단 하나의 스레드만 실행하는 영역</span>
<span class="o">}</span>
</code></pre></div></div>

<p>스레드가 동기화 메소드를 실행하는 즉시 객체는 잠금이 일어나고, 메소드 실행이 끝나면 잠금이 풀린다. 메소드 전체가 아닌 일부 영역을 실행할 때만 객체 잠금을 걸고 싶다면 다음과 같이 동기화 블록을 만들면 된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">method</span><span class="o">()</span> <span class="o">{</span>
	<span class="c1">// 여러 스레드가 실행할 수 있는 영역</span>
	<span class="kd">synchronized</span><span class="o">(</span><span class="n">공유객체</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">// 단 하나의 스레드만 실행하는 영역</span>
	<span class="o">}</span>
	<span class="c1">// 여러 스레드가 실행할 수 있는 영역</span>
<span class="o">}</span>
</code></pre></div></div>

<p>다음 예제는 공유 객체로 사용할 Calculator이다. setMemory1()을 동기화 메소드로, setMemory2()를 동기화 블록을 포함하는 메소드로 선언했다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec06.exam01</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Calculator</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">memory</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getMemory</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">memory</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">setMemory1</span><span class="o">(</span><span class="kt">int</span> <span class="n">memory</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">memory</span> <span class="o">=</span> <span class="n">memory</span><span class="o">;</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">2000</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">memory</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMemory2</span><span class="o">(</span><span class="kt">int</span> <span class="n">memory</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">synchronized</span><span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">this</span><span class="o">.</span><span class="na">memory</span> <span class="o">=</span> <span class="n">memory</span><span class="o">;</span>
			<span class="k">try</span> <span class="o">{</span>
				<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">2000</span><span class="o">);</span>
			<span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">memory</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec06.exam01</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User1Thread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="nc">Calculator</span> <span class="n">calculator</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">User1Thread</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">setName</span><span class="o">(</span><span class="s">"User1Thread"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCalculator</span><span class="o">(</span><span class="nc">Calculator</span> <span class="n">calculator</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">calculator</span> <span class="o">=</span> <span class="n">calculator</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">calculator</span><span class="o">.</span><span class="na">setMemory1</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec06.exam01</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User2Thread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="nc">Calculator</span> <span class="n">calculator</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">User2Thread</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">setName</span><span class="o">(</span><span class="s">"User2Thread"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCalculator</span><span class="o">(</span><span class="nc">Calculator</span> <span class="n">calculator</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">calculator</span> <span class="o">=</span> <span class="n">calculator</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">calculator</span><span class="o">.</span><span class="na">setMemory2</span><span class="o">(</span><span class="mi">50</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec06.exam01</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SynchronizedExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Calculator</span> <span class="n">calculator</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Calculator</span><span class="o">();</span>

		<span class="nc">User1Thread</span> <span class="n">user1Thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User1Thread</span><span class="o">();</span>
		<span class="n">user1Thread</span><span class="o">.</span><span class="na">setCalculator</span><span class="o">(</span><span class="n">calculator</span><span class="o">);</span>
		<span class="n">user1Thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

		<span class="nc">User2Thread</span> <span class="n">user2Thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User2Thread</span><span class="o">();</span>
		<span class="n">user2Thread</span><span class="o">.</span><span class="na">setCalculator</span><span class="o">(</span><span class="n">calculator</span><span class="o">);</span>
		<span class="n">user2Thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>실행 결과</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>User1Thread: 100
User2Thread: 50
</code></pre></div></div>

<h3 id="wait과-notify를-이용한-스레드-제어">wait()과 notify()를 이용한 스레드 제어</h3>

<p>경우에 따라서는 두 개의 스레드를 교대로 번갈아 가며 실행할 때도 있다. 정확한 교대 작업이 필요할 경우, 자신의 작업이 끝나면 상대방 스레드를 일시 정지 상태에서 풀어주고 자신은 일시 정지 상태로 만들면 된다.</p>

<p>이 방법의 핵심은 공유 객체에 있다. 공유 객체는 두 스레드가 작업할 내용을 각각 동기화 메소드로 정해 놓는다. 한 스레드가 작업을 완료하면 notify() 메소드를 호출해서 일시 정지 상태에 있는 다른 스레드를 실행 대기 상태로 만들고, 자신은 두 번 작업을 하지 않도록 wait() 메소드를 호출하여 일시 정지 상태로 만든다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec06.exam02</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WorkObject</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">methodA</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">thread</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">": methodA 작업 실행"</span><span class="o">);</span>
		<span class="n">notify</span><span class="o">();</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="n">wait</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="o">}</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">methodB</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">thread</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">": methodB 작업 실행"</span><span class="o">);</span>
		<span class="n">notify</span><span class="o">();</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="n">wait</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec06.exam02</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadA</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="nc">WorkObject</span> <span class="n">workObject</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">ThreadA</span><span class="o">(</span><span class="nc">WorkObject</span> <span class="n">workObject</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">setName</span><span class="o">(</span><span class="s">"ThreadA"</span><span class="o">);</span>
		<span class="k">this</span><span class="o">.</span><span class="na">workObject</span> <span class="o">=</span> <span class="n">workObject</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="n">workObject</span><span class="o">.</span><span class="na">methodA</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec06.exam02</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadB</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="nc">WorkObject</span> <span class="n">workObject</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">ThreadB</span><span class="o">(</span><span class="nc">WorkObject</span> <span class="n">workObject</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">setName</span><span class="o">(</span><span class="s">"ThreadB"</span><span class="o">);</span>
		<span class="k">this</span><span class="o">.</span><span class="na">workObject</span> <span class="o">=</span> <span class="n">workObject</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="n">workObject</span><span class="o">.</span><span class="na">methodB</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec06.exam02</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WaitNotifyExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">WorkObject</span> <span class="n">workObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WorkObject</span><span class="o">();</span>

		<span class="nc">ThreadA</span> <span class="n">threadA</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ThreadA</span><span class="o">(</span><span class="n">workObject</span><span class="o">);</span>
		<span class="nc">ThreadB</span> <span class="n">threadB</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ThreadB</span><span class="o">(</span><span class="n">workObject</span><span class="o">);</span>

		<span class="n">threadA</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
		<span class="n">threadB</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>실행 결과</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ThreadA: methodA 작업 실행
ThreadB: methodB 작업 실행
ThreadA: methodA 작업 실행
ThreadB: methodB 작업 실행
...
</code></pre></div></div>

<h2 id="147-스레드-안전-종료">14.7 스레드 안전 종료</h2>

<p>스레드는 자신의 run() 메소드가 모두 실행되면 자동적으로 종료되지만, 경우에 따라서는 실행 중인 스레드를 즉시 종료할 필요가 있다.</p>

<p>스레드를 안전하게 종료하는 방법은 사용하던 리소스들을 정리하고 run() 메소드를 빨리 종료하는 것이다. 주로 조건 이용 방법과 interrupt() 메소드 이용 방법을 사용한다.</p>

<h3 id="조건-이용">조건 이용</h3>

<p>스레드가 while 문으로 반복 실행할 경우, 조건을 이용해서 run() 메소드의 종료를 유도할 수 있다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec07.exam01</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PrintThread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kt">boolean</span> <span class="n">stop</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setStop</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">stop</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">stop</span> <span class="o">=</span> <span class="n">stop</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">while</span> <span class="o">(!</span><span class="n">stop</span><span class="o">)</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"실행 중"</span><span class="o">);</span>
		<span class="o">}</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"리소스 정리"</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"실행 종료"</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec07.exam01</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SafeStopExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">PrintThread</span> <span class="n">printThread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintThread</span><span class="o">();</span>
		<span class="n">printThread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">3000</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="o">}</span>

		<span class="n">printThread</span><span class="o">.</span><span class="na">setStop</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="interrupt-메소드-이용">interrupt() 메소드 이용</h3>

<p>interrupt() 메소드는 스레드가 일시 정지 상태에 있을 때 InterruptedException 예외를 발생시키는 역할을 한다. 이것을 이용하면 예외 처리를 통해 run() 메소드를 정상 종료시킬 수 있다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec07.exam02</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PrintThread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
				<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"실행 중"</span><span class="o">);</span>
				<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
			<span class="o">}</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="o">}</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"리소스 정리"</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"실행 종료"</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec07.exam02</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">InterruptExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintThread</span><span class="o">();</span>
		<span class="n">thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="o">}</span>

		<span class="n">thread</span><span class="o">.</span><span class="na">interrupt</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>일시 정지를 만들지 않고도 interrupt() 메소드 호출 여부를 알 수 있는 방법이 있다. Thread의 interrupted()와 isInterrupted() 메소드는 interrupt() 메소드 호출 여부를 리턴한다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec07.exam03</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PrintThread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"실행 중"</span><span class="o">);</span>
			<span class="k">if</span> <span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">interrupted</span><span class="o">())</span> <span class="o">{</span>
				<span class="k">break</span><span class="o">;</span>
			<span class="o">}</span>
		<span class="o">}</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"리소스 정리"</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"실행 종료"</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec07.exam03</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">InterruptExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintThread</span><span class="o">();</span>
		<span class="n">thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="o">}</span>

		<span class="n">thread</span><span class="o">.</span><span class="na">interrupt</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="148-데몬-스레드">14.8 데몬 스레드</h2>

<p><strong>데몬(daemon) 스레드</strong>는 주 스레드의 작업을 돕는 보조적인 역할을 수행하는 스레드이다. 주 스레드가 종료되면 데몬 스레드도 따라서 자동으로 종료된다.</p>

<p>스레드를 데몬으로 만들기 위해서는 주 스레드가 데몬이 될 스레드의 setDaemon(true)를 호출하면 된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec08</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AutoSaveThread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"작업 내용을 저장함."</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">try</span> <span class="o">{</span>
				<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
				<span class="k">break</span><span class="o">;</span>
			<span class="o">}</span>
			<span class="n">save</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec08</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DaemonExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">AutoSaveThread</span> <span class="n">autoSaveThread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AutoSaveThread</span><span class="o">();</span>
		<span class="n">autoSaveThread</span><span class="o">.</span><span class="na">setDaemon</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
		<span class="n">autoSaveThread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">3000</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="o">}</span>

		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"메인 스레드 종료"</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>실행 결과</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>작업 내용을 저장함.
작업 내용을 저장함.
메인 스레드 종료
</code></pre></div></div>

<h2 id="149-스레드풀">14.9 스레드풀</h2>

<p>병렬 작업 처리가 많아지면 스레드의 개수가 폭증하여 CPU가 바빠지고 메모리 사용량이 늘어난다. 이에 따라 애플리케이션의 성능 또한 급격히 저하된다. 이렇게 병렬 작업 증가로 인한 스레드의 폭증을 막으려면 <strong>스레드풀(ThreadPool)</strong>을 사용하는 것이 좋다.</p>

<p>스레드풀은 작업 처리에 사용되는 스레드를 제한된 개수만큼 정해 놓고 작업 큐(Queue)에 들어오는 작업들을 스레드가 하나씩 맡아 처리하는 방식이다.</p>

<h3 id="스레드풀-생성">스레드풀 생성</h3>

<p>자바는 스레드풀을 생성하고 사용할 수 있도록 java.util.concurrent 패키지에서 ExecutorService 인터페이스와 Executors 클래스를 제공하고 있다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 초기 수 0, 코어 수 0, 최대 수 Integer.MAX_VALUE</span>
<span class="nc">ExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">newCachedThreadPool</span><span class="o">();</span>

<span class="c1">// 초기 수 0, 코어 수 0, 최대 수 5</span>
<span class="nc">ExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
</code></pre></div></div>

<h3 id="스레드풀-종료">스레드풀 종료</h3>

<p>스레드풀의 스레드는 기본적으로 데몬 스레드가 아니기 때문에 main 스레드가 종료되더라도 작업을 처리하기 위해 계속 실행 상태로 남아 있다. 스레드풀의 모든 스레드를 종료하려면 ExecutorService의 shutdown() 또는 shutdownNow() 메소드를 실행해야 한다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec09.exam01</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.concurrent.ExecutorService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executors</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExecutorServiceExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">// 스레드풀 생성</span>
		<span class="nc">ExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
		<span class="c1">// 작업 생성과 처리 요청</span>
		<span class="c1">// 스레드풀 종료</span>
		<span class="n">executorService</span><span class="o">.</span><span class="na">shutdownNow</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="작업-생성과-처리-요청">작업 생성과 처리 요청</h3>

<p>하나의 작업은 Runnable 또는 Callable 구현 객체로 표현한다. Runnable과 Callable의 차이점은 작업 처리 완료 후 리턴값이 있느냐 없느냐이다.</p>

<p>작업 처리 요청이란 ExecutorService의 작업 큐에 Runnable 또는 Callable 객체를 넣는 행위를 말한다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">execute(Runnable command)</code>: Runnable을 작업 큐에 저장. 작업 처리 결과를 리턴하지 않음.</li>
  <li><code class="language-plaintext highlighter-rouge">submit(Callable&lt;T&gt; task)</code>: Callable을 작업 큐에 저장. 작업 처리 결과를 얻을 수 있도록 Future를 리턴.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec09.exam02</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.concurrent.ExecutorService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executors</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RunnableExecuteExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">// 1000개의 메일 생성</span>
		<span class="nc">String</span><span class="o">[][]</span> <span class="n">mails</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[</span><span class="mi">1000</span><span class="o">][</span><span class="mi">3</span><span class="o">];</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">mails</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="n">mails</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="s">"admin@my.com"</span><span class="o">;</span>
			<span class="n">mails</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="s">"member"</span><span class="o">+</span><span class="n">i</span><span class="o">+</span><span class="s">"@my.com"</span><span class="o">;</span>
			<span class="n">mails</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">2</span><span class="o">]</span> <span class="o">=</span> <span class="s">"신상품 입고"</span><span class="o">;</span>
		<span class="o">}</span>

		<span class="c1">// ExecutorService 생성</span>
		<span class="nc">ExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>

		<span class="c1">// 이메일을 보내는 작업 생성 및 처리 요청</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">1000</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="kd">final</span> <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
			<span class="n">executorService</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
				<span class="nd">@Override</span>
				<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
					<span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">();</span>
					<span class="nc">String</span> <span class="n">from</span> <span class="o">=</span> <span class="n">mails</span><span class="o">[</span><span class="n">idx</span><span class="o">][</span><span class="mi">0</span><span class="o">];</span>
					<span class="nc">String</span> <span class="n">to</span> <span class="o">=</span> <span class="n">mails</span><span class="o">[</span><span class="n">idx</span><span class="o">][</span><span class="mi">1</span><span class="o">];</span>
					<span class="nc">String</span> <span class="n">content</span> <span class="o">=</span> <span class="n">mails</span><span class="o">[</span><span class="n">idx</span><span class="o">][</span><span class="mi">2</span><span class="o">];</span>
					<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"["</span> <span class="o">+</span> <span class="n">thread</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"] "</span> <span class="o">+</span>
							<span class="n">from</span> <span class="o">+</span> <span class="s">" ==&gt; "</span> <span class="o">+</span> <span class="n">to</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">content</span><span class="o">);</span>
				<span class="o">}</span>
			<span class="o">});</span>
		<span class="o">}</span>

		<span class="c1">// ExecutorService 종료</span>
		<span class="n">executorService</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">ch14.sec09.exam03</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.concurrent.Callable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.ExecutorService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executors</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Future</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CallableSubmitExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">// ExecutorService 생성</span>
		<span class="nc">ExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>

		<span class="c1">// 계산 작업 생성 및 처리 요청</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="mi">100</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="kd">final</span> <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
			<span class="nc">Future</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">future</span> <span class="o">=</span> <span class="n">executorService</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="k">new</span> <span class="nc">Callable</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;()</span> <span class="o">{</span>
				<span class="nd">@Override</span>
				<span class="kd">public</span> <span class="nc">Integer</span> <span class="nf">call</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
					<span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
					<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">idx</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
						<span class="n">sum</span> <span class="o">+=</span> <span class="n">i</span><span class="o">;</span>
					<span class="o">}</span>
					<span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">();</span>
					<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"["</span> <span class="o">+</span> <span class="n">thread</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"] 1~"</span> <span class="o">+</span> <span class="n">idx</span> <span class="o">+</span> <span class="s">" 합 계산"</span><span class="o">);</span>
					<span class="k">return</span> <span class="n">sum</span><span class="o">;</span>
				<span class="o">}</span>
			<span class="o">});</span>

			<span class="k">try</span> <span class="o">{</span>
				<span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">future</span><span class="o">.</span><span class="na">get</span><span class="o">();</span> <span class="c1">// Callable의 call() 메소드가 리턴한 값 얻기</span>
				<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"\t리턴값: "</span> <span class="o">+</span> <span class="n">result</span><span class="o">);</span>
			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
				<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
			<span class="o">}</span>
		<span class="o">}</span>

		<span class="c1">// ExecutorService 종료</span>
		<span class="n">executorService</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="확인문제">확인문제</h2>

<ol>
  <li>스레드에 대한 설명 중 틀린 것은 무엇입니까?
    <ul>
      <li>① 자바 애플리케이션은 메인(main) 스레드가 main() 메소드를 실행시킨다.</li>
      <li>② 작업 스레드 클래스는 Thread 클래스를 상속해서 만들 수 있다.</li>
      <li>③ Runnable 객체는 스레드가 실행해야 할 코드를 가지고 있는 객체라고 볼 수 있다.</li>
      <li>④ 스레드 실행을 시작하려면 run() 메소드를 호출해야 한다.
        <blockquote>
          <p><strong>정답</strong>: ④
<strong>해설</strong>: 스레드 실행을 시작하려면 start() 메소드를 호출해야 한다.</p>
        </blockquote>
      </li>
    </ul>
  </li>
  <li>동영상과 음악을 재생하기 위해 두 가지 스레드를 실행하려고 합니다. 밑줄 친 부분에 적당한 코드를 작성해 보세요.
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Thread</span> <span class="n">thread1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MovieThread</span><span class="o">();</span>
		<span class="n">thread1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

		<span class="nc">Thread</span> <span class="n">thread2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="k">new</span> <span class="nc">MusicRunnable</span><span class="o">());</span>
		<span class="n">thread2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MovieThread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"동영상을 재생합니다."</span><span class="o">);</span>
			<span class="k">try</span> <span class="o">{</span>
				<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MusicRunnable</span> <span class="kd">implements</span> <span class="nc">Runnable</span> <span class="o">{</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"음악을 재생합니다."</span><span class="o">);</span>
			<span class="k">try</span> <span class="o">{</span>
				<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>동기화 메소드와 동기화 블록에 대한 설명 중 틀린 것은 무엇입니까?
    <ul>
      <li>① 동기화 메소드와 동기화 블록은 싱글(단일) 스레드 환경에서는 필요 없다.</li>
      <li>② 스레드가 동기화 메소드를 실행할 때 다른 스레드는 일반 메소드를 호출할 수 없다.</li>
      <li>③ 스레드가 동기화 메소드를 실행할 때 다른 스레드는 동기화 메소드를 호출할 수 없다.</li>
      <li>④ 스레드가 동기화 블록을 실행할 때 다른 스레드는 동기화 메소드를 호출할 수 없다.
        <blockquote>
          <p><strong>정답</strong>: ②
<strong>해설</strong>: 스레드가 동기화 메소드를 실행할 때 다른 스레드는 일반 메소드를 호출할 수 있다. 동기화된 메소드나 블록만 접근이 차단된다.</p>
        </blockquote>
      </li>
    </ul>
  </li>
  <li>스레드 일시 정지 상태에 대한 설명 중 틀린 것은 무엇입니까?
    <ul>
      <li>① sleep() 메소드는 주어진 시간동안 스레드가 일시 정지 상태가 된다.</li>
      <li>② 스레드가 동기화 메소드를 실행할 때 다른 스레드가 동기화 메소드를 호출하게 되면 일시 정지 상태가 된다.</li>
      <li>③ 동기화 메소드 내에서 wait() 메소드를 호출하면 현재 스레드가 일시 정지 상태가 된다.</li>
      <li>④ yield() 메소드를 호출하면 현재 스레드가 일시 정지 상태가 된다.
        <blockquote>
          <p><strong>정답</strong>: ④
<strong>해설</strong>: yield() 메소드를 호출하면 실행 대기 상태가 된다.</p>
        </blockquote>
      </li>
    </ul>
  </li>
  <li>interrupt() 메소드를 호출한 효과에 대한 설명 중 틀린 것은 무엇입니까?
    <ul>
      <li>① 일시 정지 상태에서 InterruptedException을 발생시킨다.</li>
      <li>② 스레드를 즉시 종료한다.</li>
      <li>③ 스레드가 일시 정지 상태가 될 때까지 InterruptedException이 발생하지 않는다.</li>
      <li>④ InterruptedException이 발생하지 않았다면 isInterrupted() 메소드는 true를 리턴한다.
        <blockquote>
          <p><strong>정답</strong>: ②
<strong>해설</strong>: interrupt() 메소드는 즉시 종료시키는 것이 아니라, 예외를 발생시키거나 인터럽트 상태를 설정하여 종료를 유도하는 것이다.</p>
        </blockquote>
      </li>
    </ul>
  </li>
  <li>메인 스레드에서 3초 후 MovieThread의 interrupt() 메소드를 호출해서 MovieThread를 안전하게 종료하고 싶습니다. 비어있는 부분에 적당한 코드를 작성해 보세요.
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MovieThread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"동영상을 재생합니다."</span><span class="o">);</span>
			<span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">isInterrupted</span><span class="o">())</span> <span class="o">{</span>
				<span class="k">break</span><span class="o">;</span>
			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
    <blockquote>
      <p><strong>해설</strong>: 또는</p>
      <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>			<span class="k">try</span> <span class="o">{</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> <span class="k">break</span><span class="o">;</span> <span class="o">}</span>
</code></pre></div>      </div>
      <p>도 가능하지만, 문제에서 “비어있는 부분에 적당한 코드”라고 했고 반복문 안이므로 <code class="language-plaintext highlighter-rouge">if (Thread.interrupted()) break;</code> 혹은 <code class="language-plaintext highlighter-rouge">if (this.isInterrupted()) break;</code> 가 적절하다.
<em>OCR 결과에 따르면:</em></p>
      <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
Thread thread = new MovieThread();
thread.start();
try { Thread.sleep(3000); } catch (InterruptedException e) {}
thread.interrupt();
*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MovieThread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"동영상을 재생합니다."</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">isInterrupted</span><span class="o">())</span> <span class="o">{</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>      </div>
    </blockquote>
  </li>
  <li>wait()와 notify() 메소드에 대한 설명 중 틀린 것은 무엇입니까?
    <ul>
      <li>① 스레드가 wait()를 호출하면 일시 정지 상태가 된다.</li>
      <li>② notify()를 호출하면 wait()로 일시 정지 상태에 있던 스레드가 실행 대기 상태가 된다.</li>
      <li>③ wait()와 notify()는 동기화 메소드 또는 블록에서 호출할 필요가 없다.</li>
      <li>④ wait()와 notify()는 두 스레드가 균등하게 번갈아 가면서 실행할 때 사용할 수 있다.
        <blockquote>
          <p><strong>정답</strong>: ③
<strong>해설</strong>: wait()와 notify()는 반드시 동기화 메소드 또는 동기화 블록 내에서 호출해야 한다.</p>
        </blockquote>
      </li>
    </ul>
  </li>
  <li>3초 뒤에 메인 스레드가 종료하면 MovieThread도 같이 종료되게 만들고 싶습니다. 밑줄 친 부분에 적당한 코드를 넣어 보세요.
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadExample</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MovieThread</span><span class="o">();</span>
		<span class="n">thread</span><span class="o">.</span><span class="na">setDaemon</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
		<span class="n">thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
		<span class="k">try</span> <span class="o">{</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">3000</span><span class="o">);</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>while 문으로 반복적인 작업을 하는 스레드를 종료시키는 방법에 대한 설명 중 최선의 방법이 아닌 것은 무엇입니까?
    <ul>
      <li>① 조건식에 boolean 타입의 stop 플래그를 이용해서 while 문을 빠져나가게 한다.</li>
      <li>② 스레드가 반복적으로 일시 정지 상태가 된다면 InterruptedException을 발생시켜 예외 처리 코드에서 break 문으로 while 문을 빠져나가게 한다.</li>
      <li>③ 스레드가 일시 정지 상태로 가지 않는다면 isInterrupted()나 interrupted() 메소드의 리턴값을 조사해서 true일 경우 break 문으로 while 문을 빠져나가게 한다.</li>
      <li>④ stop() 메소드를 호출한다.
        <blockquote>
          <p><strong>정답</strong>: ④
<strong>해설</strong>: stop() 메소드는 deprecated 되었으므로 사용하지 않는 것이 좋다.</p>
        </blockquote>
      </li>
    </ul>
  </li>
  <li>스레드풀에 대한 설명 중 틀린 것은 무엇입니까?
    <ul>
      <li>① 갑작스러운 작업의 증가로 스레드의 폭증을 막기 위해 사용된다.</li>
      <li>② ExecutorService 객체가 스레드풀이며 newFixedThreadPool() 메소드로 얻을 수 있다.</li>
      <li>③ 작업은 Runnable 또는 Callable 인터페이스를 구현해서 정의한다.</li>
      <li>④ execute() 메소드로 작업 처리 요청을 하면 작업이 완료될 때까지 대기(블로킹)된다.
        <blockquote>
          <p><strong>정답</strong>: ④
<strong>해설</strong>: execute() 메소드는 작업을 큐에 넣고 즉시 리턴한다(비동기). 블로킹되지 않는다.</p>
        </blockquote>
      </li>
    </ul>
  </li>
</ol>

        </div>

        <div class="bd-toc mt-3 mb-5 my-lg-0 ps-xl-3 mb-lg-5 text-body-secondary">

  <button class="btn btn-link p-md-0 mb-2 mb-md-0 text-decoration-none bd-toc-toggle d-md-none" type="button"
    data-bs-toggle="collapse" data-bs-target="#tocContents" aria-expanded="false" aria-controls="tocContents">
    서브목차
    <svg class="bi d-md-none ms-2" aria-hidden="true">
      <use xlink:href="#chevron-expand"></use>
    </svg>
  </button>

  <strong class="d-none d-md-block h6 my-2">서브목차</strong>

  <div class="collapse bd-toc-collapse" id="tocContents">
    <nav id="TableOfContents">
      <!--
      <ul>
        <li><a href="#quick-start">Quick start</a></li>
        <li><a href="#cdn-links">CDN links</a></li>
        <li><a href="#next-steps">Next steps</a></li>
        <li><a href="#js-components">JS components</a></li>
        <li><a href="#important-globals">Important globals</a>
          <ul>
            <li><a href="#html5-doctype">HTML5 doctype</a></li>
            <li><a href="#responsive-meta-tag">Responsive meta tag</a></li>
            <li><a href="#box-sizing">Box-sizing</a></li>
            <li><a href="#reboot">Reboot</a></li>
          </ul>
        </li>
        <li><a href="#community">Community</a></li>
      </ul>
      -->
    </nav>
  </div>
</div>
    </main>
</div>

  <footer class="container">
  <hr class="mt-5 mb-3">
  <div class="row align-items-center pb-3">
    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
      <p class="mb-0 text-secondary">Copyright 2017~2026 JinyDev. All Rights Reserved.</p>
    </div>
    <div class="col-md-6 text-center text-md-end">
      
      <a href="https://datas.jiny.dev" class="text-decoration-none text-secondary ms-3">빅데이터</a>
      
      <a href="https://mysql.jiny.dev" class="text-decoration-none text-secondary ms-3">MySQL</a>
      
      <a href="https://php.jiny.dev" class="text-decoration-none text-secondary ms-3">PHP</a>
      
      <a href="https://java.jiny.dev" class="text-decoration-none text-secondary ms-3">자바</a>
      
      <a href="https://git.jiny.dev" class="text-decoration-none text-secondary ms-3">깃&깃허브</a>
      
      <a href="https://linux.jiny.dev" class="text-decoration-none text-secondary ms-3">리눅스</a>
      
    </div>
  </div>
</footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
    crossorigin="anonymous"></script>
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

    window.addEventListener('load', async function () {
      mermaid.initialize({ startOnLoad: false });

      const mermaidCodes = document.querySelectorAll('pre code.language-mermaid');
      const mermaidDivs = [];

      mermaidCodes.forEach(codeBlock => {
        const mermaidDefinition = codeBlock.textContent.trim();
        const container = codeBlock.closest('div.highlighter-rouge');

        const mermaidDiv = document.createElement('div');
        mermaidDiv.className = 'mermaid';
        mermaidDiv.textContent = mermaidDefinition;

        if (container) {
          container.replaceWith(mermaidDiv);
        } else {
          const pre = codeBlock.parentElement;
          if (pre) pre.replaceWith(mermaidDiv);
        }
        mermaidDivs.push(mermaidDiv);
      });

      if (mermaidDivs.length > 0) {
        await mermaid.run({ nodes: mermaidDivs });
      }
    });
  </script>
  <script src="/assets/js/toc.js"></script>

</body>

</html>