---
layout: part02
title: "7.7 타입 변환"
nav_order: 7
parent: "Chapter 07. 상속"
grand_parent: "객체지향 자바 프로그래밍"
---

# 7.7 타입 변환

타입 변환이란 타입을 다른 타입으로 변환하는 것을 말한다. 기본 타입의 변환에 대해서는 이미 2.7-8절에서 학습한 바 있다. 클래스도 마찬가지로 타입 변환이 있는데, 클래스의 타입 변환은 상속 관계에 있는 클래스 사이에서 발생한다.

## 자동 타입 변환

자동 타입 변환(Promotion)은 의미 그대로 자동적으로 타입 변환이 일어나는 것을 말한다. 자동 타입 변환은 다음과 같은 조건에서 일어난다.

```java
부모타입 변수 = 자식타입객체;
```

자식은 부모의 특징과 기능을 상속받기 때문에 부모와 동일하게 취급될 수 있다. 예를 들어 고양이가 동물의 특징과 기능을 상속받았다면 '고양이는 동물이다'가 성립한다.

```java
class Animal {
}

class Cat extends Animal {
}
```

그래서 Cat 객체를 생성하고 이것을 Animal 변수에 대입하면 자동 타입 변환이 일어난다.

```java
Cat cat = new Cat();
Animal animal = cat;
// Animal animal = new Cat();
```

위 코드로 생성되는 메모리 상태를 그림으로 묘사하면 다음과 같다. cat과 animal 변수는 타입만 다를 뿐, 동일한 Cat 객체를 참조한다.

따라서 두 참조 변수의 == 연산 결과는 true가 나온다.

```java
cat == animal // true
```

바로 위의 부모가 아니더라도 상속 계층에서 상위 타입이라면 자동 타입 변환이 일어날 수 있다.

```java
class A {}
class B extends A {}
class C extends A {}
class D extends B {}
class E extends C {}

public class PromotionExample {
    public static void main(String[] args) {
        B b = new B();
        C c = new C();
        D d = new D();
        E e = new E(); 
        
        A a1 = b;
        A a2 = c;
        A a3 = d;
        A a4 = e;
        
        B b1 = d;
        C c1 = e;
        
        // B b3 = e; // (x) 상속 관계 아님
        // C c2 = d; // (x) 상속 관계 아님
    }
}
```

부모 타입으로 자동 타입 변환된 이후에는 부모 클래스에 선언된 필드와 메소드만 접근이 가능하다.

```java
class Parent {
    void method1() { ... }
    void method2() { ... }
}

class Child extends Parent {
    void method2() { ... } // 오버라이딩
    void method3() { ... }
}

class ChildExample {
    public static void main(String[] args) {
        Child child = new Child();
        Parent parent = child;
        
        parent.method1();
        parent.method2();
        // parent.method3(); // (호출 불가능)
    }
}
```

그러나 자식 클래스에서 오버라이딩된 메소드가 있다면 부모 메소드 대신 오버라이딩된 메소드가 호출된다. 이것은 다형성(Polymorphism)과 관련 있기 때문에 잘 알아두어야 한다.

**Parent.java**
```java
package ch07.sec07.exam02;

public class Parent {
	// 메소드 선언
	public void method1() {
		System.out.println("Parent-method1()");
	}
	
	// 메소드 선언
	public void method2() {
		System.out.println("Parent-method2()");
	}
}
```

**Child.java**
```java
package ch07.sec07.exam02;

public class Child extends Parent {
	// 메소드 오버라이딩
	@Override
	public void method2() {
		System.out.println("Child-method2()");
	}
	
	// 메소드 선언
	public void method3() {
		System.out.println("Child-method3()");
	}
}
```

**ChildExample.java**
```java
package ch07.sec07.exam02;

public class ChildExample {
	public static void main(String[] args) {
		// 자식 객체 생성
		Child child = new Child();
		
		// 자동 타입 변환
		Parent parent = child;
		
		// 메소드 호출
		parent.method1();
		parent.method2();
		// parent.method3(); // (호출 불가능)
	}
}
```

**실행 결과**
```
Parent-method1()
Child-method2()
```

## 강제 타입 변환

자식 타입은 부모 타입으로 자동 변환되지만, 반대로 부모 타입은 자식 타입으로 자동 변환되지 않는다. 대신 다음과 같이 캐스팅 연산자로 강제 타입 변환(Casting)을 할 수 있다.

```java
자식타입 변수 = (자식타입) 부모타입객체;
```

그렇다고 해서 부모 타입 객체를 자식 타입으로 무조건 강제 변환할 수 있는 것은 아니다. 자식 객체가 부모 타입으로 자동 변환된 후 다시 자식 타입으로 변환할 때 강제 타입 변환을 사용할 수 있다.

```java
Parent parent = new Child(); // 자동 타입 변환
Child child = (Child) parent; // 강제 타입 변환
```

자식 객체가 부모 타입으로 자동 변환하면 부모 타입에 선언된 필드와 메소드만 사용 가능하다는 제약 사항이 따른다. 만약 자식 타입에 선언된 필드와 메소드를 꼭 사용해야 한다면 강제 타입 변환을 해서 다시 자식 타입으로 변환해야 한다.

**Parent.java**
```java
package ch07.sec07.exam03;

public class Parent {
	// 필드 선언
	public String field1;
	
	// 메소드 선언
	public void method1() {
		System.out.println("Parent-method1()");
	}
	
	// 메소드 선언
	public void method2() {
		System.out.println("Parent-method2()");
	}
}
```

**Child.java**
```java
package ch07.sec07.exam03;

public class Child extends Parent {
	// 필드 선언
	public String field2;
	
	// 메소드 선언
	public void method3() {
		System.out.println("Child-method3()");
	}
}
```

**ChildExample.java**
```java
package ch07.sec07.exam03;

public class ChildExample {
	public static void main(String[] args) {
		// 객체 생성 및 자동 타입 변환
		Parent parent = new Child();
		
		// Parent 타입으로 필드와 메소드 사용
		parent.field1 = "data1";
		parent.method1();
		parent.method2();
		/*
		parent.field2 = "data2"; // (불가능)
		parent.method3(); // (불가능)
		*/
		
		// 강제 타입 변환
		Child child = (Child) parent;
		
		// Child 타입으로 필드와 메소드 사용
		child.field2 = "data2"; // (가능)
		child.method3(); // (가능)
	}
}
```

**실행 결과**
```
Parent-method1()
Parent-method2()
Child-method3()
```
